<!DOCTYPE html>
<html lang="vi">

<!-- Mirrored from visualgo.net/vi/suffixarray by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 26 Nov 2020 06:40:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8">
<meta name="description" content="Suffix Array is a sorted array of all suffixes of a string T with usually long length n. It is a simple, yet powerful data structure which is used, among others, in full text indices, data compression algorithms, and within the field of bioinformatics. This data structure is very related to Suffix Tree data structure.">
<meta name="keywords" content="Suffix Array Construction Common Prefix LCP String Matching Longest Repeated Substring">
 
<meta name="csrf-token" content="iVivZ7KRPe6XK7pbuGtOoEjljE1xyBVNhLKNFuF8">
<meta http-equiv="X-UA-Compatible" content="IE=EDGE">
<meta property="og:image" content="../img/png/suffixarray.png">
<title>VisuAlgo - Suffix Array</title>
<link rel="icon" href="../img/favicon.png" type="image/x-icon">
<link rel="shortcut icon" href="../img/favicon.png" type="image/x-icon">
<link rel="apple-touch-icon" href="../img/favicon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/favicon.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/favicon.png">
<link rel="stylesheet" type="text/css" href="../fonts/silkscreen/stylesheet.css">
<link rel="stylesheet" type="text/css" href="../css/common.css">
<link rel="stylesheet" href="../css/viz-1.0.1.css">
<link rel="stylesheet" href="../css/visual.css">
<link rel="stylesheet" href="../css/drawgraph.css">
<style>
      #e-lecture {
        top: 45px;
        right: 130px;
        width: 400px;
        display: block;
        background: none;
        /*overflow: normal;*/
        white-space: normal;
        text-align: right;
        color: black; font-weight: bold; font-size: 20px;
      }
      .electure-prev, .electure-next { /* force update, copied from viz.css */
        position: absolute;
        /* bottom: -12px; */
        top: -20px;
        /*bottom: '';*/
        padding: 3px 8px;
        background: #999;
        color: white;
        cursor: pointer;
        border-radius: 2px;
      }
      .electure-prev {
        left: -10px;
        /* right: 30px; */
      }
      .electure-next {
        right: -10px;
        color: white;
      }
    </style>
<style>
.construct { bottom: 172px; }
  #construct-input input {
    width: 200px;
    padding: 8px;
  }
  #construct-go p { padding: 8px 8px 7px; }
  #construct-err { padding: 8px 0px 7px; }

.search { bottom: 146px; }
  #search-input input {
    width: 200px;
    padding: 6px 8px 5px;
  }
  #search-go p { padding: 5px 8px; }    
  #search-err { padding: 5px 0px; }

.lcp { bottom: 119px; }
  #lcp-err { padding: 5px 0px; }

.lrs { bottom: 92px; }
  #lrs-err { padding: 5px 0px; }

.lcs { bottom: 60px; }
  #lcs-input input {
    width: 78px;
    padding: 8px;
  }
  #lcs-go p { padding: 8px 8px 7px; }
  #lcs-err { padding: 8px 0px 7px; }

/*others*/
.background {
  fill: none;
  pointer-events: all;
}

.lcs_first {
  fill: #2ebbd1;
}

.lcs_second {
  fill: #52bc69;
}
</style>
<script>
      function changeURL() {
        var URL = window.location.href.split('https://visualgo.net/');
        var val = document.getElementById("Language").value;
        URL[3] = val;
        window.location.assign(URL.join('https://visualgo.net/'));
      }
    </script>
</head>
<body>
<div id="top-bar">
<a href="http://www.comp.nus.edu.sg/~stevenha"><span class="colour" style="border: 1px solid green; border-radius: 25px;">7</span></a>&nbsp;&nbsp;&nbsp;
<a id="home" href="https://visualgo.net/">Visu<span class="colour">Algo</span><span style="font-size: 40%">.net</span></a>
/
<select id="Language" onchange="changeURL()">
<option value="en">en</option>
<option value="zh">zh</option>
<option value="es">es</option>
<option value="pt">pt</option>
<option value="ru">ru</option>
<option value="id">id</option>
<option value="de">de</option>
<option value="bn">bn</option>
<option value="ja">ja</option>
<option value="ko">ko</option>
<option value="vi" selected>vi</option>
</select>
/suffixarray
<span class="right-links" id="useraccount">Login</span>
<span id="title">
<a id='title-suffixarray' class='selected-viz'>Suffix Array</a>
</span>
<div id="mode-menu">
<div id='mode-button' title='exploration'>Chế độ thăm dò &#9663;</div>
<div id='other-modes'>
<a title='e-Lecture'>Chế độ Bài giảng trực tuyến</a>
</div>
</div>
</div>
<div id="dark-overlay"></div>
<div id="status" class="panel"><p></p></div>
<div id="status-hide" class="panel-hide"><img src="../img/arrow_white_right.png" alt=">" title="show/hide status panel" /></div>
<div id="codetrace" class="panel">
<p id="code1" style="padding-top: 10px;"></p>
<p id="code2"></p>
<p id="code3"></p>
<p id="code4"></p>
<p id="code5"></p>
<p id="code6"></p>
<p id="code7" style="padding-bottom: 10px;"></p>
</div>
<div id="codetrace-hide" class="panel-hide"><img src="../img/arrow_white_right.png" alt=">" title="show/hide codetrace panel" /></div>
<div id="left-bar"></div>
<div id="right-bar"></div>
<div id="media-controls">
<div id='speed-control'>Chậm<div id='speed-input'></div>Nhanh<br></div>
<span id="go-to-beginning" class="media-control-button" title="go to beginning" onclick=goToBeginning()><img src="../img/goToBeginning.png" alt="go to beginning"></span>
<span id="previous" class="media-control-button" title="step backward" onclick=stepBackward()><img src="../img/prevFrame.png" alt="previous frame"></span>
<span id="pause" class="media-control-button" title="pause" onclick=pause()><img src="../img/pause.png" alt="pause"></span>
<span id="play" class="media-control-button" title="play" onclick=play()><img src="../img/play.png" alt="play"></span>
<span id="next" class="media-control-button" title="step forward" onclick=stepForward()><img src="../img/nextFrame.png" alt="next frame"></span>
<span id="go-to-end" class="media-control-button" title="go to end" onclick=goToEnd()><img src="../img/goToEnd.png" alt="go to end"></span>
<div id="progress-bar" class="media-control-button"></div>
</div>
<div id='viz'></div>
<div id='current-action' class='panel'></div>
<div id='e-lecture' class='panel'></div>
<div id="overlay" hidden></div>
<div id="dropdown-temp-holder" hidden></div>
<div id="electure-1" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p><strong>Suffix Array</strong> is a sorted array of all suffixes of a string <b>T</b> with usually long length <b>n</b>. It is a simple, yet powerful data structure which is used, among others, in full text indices, data compression algorithms, and within the field of bioinformatics. This data structure is very related to <a href="suffixtree.html"><u>Suffix Tree</u></a> data structure.</p>
<hr>
<p><b>Remarks</b>: By default, we show e-Lecture Mode for first time (or non logged-in) visitor.<br>
Please <a href="https://visualgo.net/login"><u>login</u></a> if you are a repeated visitor or <a href="https://visualgo.net/login"><u>register</u></a> for an (optional) free account first.</p>
<div id='electure-dropdown'>
<select class="lecture-dropdown" style="width:100%">
<option value="1">1. Suffix Array</option>
<option value="2">2. Visualisation</option>
<option value="3">3. Available operations</option>
<option value="4">4. Implementation</option>
<option value="99">99. Status Panel</option>
<option value="99-1">&nbsp;&nbsp;&nbsp;99-1. Codetrace Panel</option>
<option value="99-2">&nbsp;&nbsp;&nbsp;99-2. Media Control</option>
<option value="99-3">&nbsp;&nbsp;&nbsp;99-3. Return to &#39;Exploration Mode&#39;</option>
</select>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-next' data-nextid="2">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-2" class="electure-dialog" style="top:270px;left:50%;margin-left:-200px;width:400px;">
<p>The visualisation of Suffix Array is simply a table where each row represents a suffix and each column represents the attributes of the suffixes.</p>
<hr>
<p>Pro-tip: Since you are not <a href="https://visualgo.net/login"><u>logged-in</u></a>, you may be a first time visitor who are not aware of the following keyboard shortcuts to navigate this e-Lecture mode: <b>[PageDown]</b> to advance to the next slide, <b>[PageUp]</b> to go back to the previous slide, <b>[Esc]</b> to toggle between this e-Lecture mode and exploration mode.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="1">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="3">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-3" class="electure-dialog" style="bottom:230px;left:60px;width:610px;">
<p>All available operations on the Sufix Array are listed below.</p><ol><li><b>Construct Suffix Array (SA)</b> is the O(<b>n</b> log <b>n</b>) Suffix Array construction algorithm based on the idea by Karp, Miller, &amp; Rosenberg (1972) that sort prefixes of the suffix in increasing length (1, 2, 4, 8, ...).</li><li><b>Search</b> utilizes the fact that the suffixes in Suffix Array are sorted and call two binary searches in O(<b>m</b> log <b>n</b>) to find the first and the last occurrence(s) of pattern string <b>P</b> of length <b>m</b>.</li><li><b>Longest Common Prefix (LCP)</b> between two adjacent suffixes (excluding the first suffix) can be computed in O(<b>n</b>) using the Permuted LCP (PLCP) theorem.</li><li><b>Longest Repeated Substring (LRS)</b> is a simple O(<b>n</b>) algorithm that finds the suffix with the highest LCP value.</li><li><b>Longest Common Substring (LCS)</b> is a simple O(<b>n</b>) algorithm that finds the suffix with the highest LCP value that comes from two different strings.</li></ol>
<hr>
<p>Another pro-tip: We designed this visualization and this e-Lecture mode to look good on 1366x768 resolution <b>or larger</b> (typical modern laptop resolution in 2017). We recommend using Google Chrome to access VisuAlgo. Go to full screen mode (<b>F11</b>) to enjoy this setup. However, you can use zoom-in (<b>Ctrl +</b>) or zoom-out (<b>Ctrl -</b>) to calibrate this.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="2">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="4">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-4" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>You are allowed to use/modify our implementation code for fast Suffix Array+LCP:<br><a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch6/sa_lcp.cpp" target="_blank"><u>sa_lcp.cpp</u></a><br><a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch6/sa_lcp.java" target="_blank"><u>sa_lcp.java</u></a><br><a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch6/sa_lcp.py" target="_blank"><u>sa_lcp.py</u></a><br><a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch6/sa_lcp.ml" target="_blank"><u>sa_lcp.ml</u></a><br></p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="3">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="99">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-99" class="electure-dialog" style="right:150px;bottom:335px;width:500px;">
<p>As the action is being carried out, each step will be described in the status panel.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="4">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="99-1">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-99-1" class="electure-dialog" style="right:170px;bottom:275px;width:180px;">
<div style="background-color: white; color: black;">
<p>e-Lecture: The content of this slide is hidden and only available for legitimate CS lecturer worldwide. Drop an email to visualgo.info at gmail dot com if you want to activate this CS lecturer-only feature <b>and you are really a CS lecturer (show your University staff profile)</b>.</p>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="99">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="99-2">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-99-2" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-120px;width:260px;">
<p>Control the animation with the player controls! Keyboard shortcuts are:<br></p><div style="margin-top: 8px;"><strong>Spacebar:</strong> play/pause/replay</div><strong>Left/right arrows:</strong> step backward/step forward<br><strong>-/+:</strong> decrease/increase speed<br>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="99-1">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="99-3">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-99-3" class="electure-dialog" style="top:70px;right:60px;width:300px;">
<p>Return to &#39;Exploration Mode&#39; to start exploring!</p><br><p>Note that if you notice any bug in this visualization or if you want to request for a new visualization feature, do not hesitate to drop an email to the project leader: Dr Steven Halim via his email address: stevenhalim at gmail dot com.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="99-2">Trước đó <u>PgUp</u></div>
</div>
<div id="popup" hidden>
<div id="popup-content"></div>
<span id="hide-popup" hidden>X <u>Close</u></span>
</div>
<div id="actions" class="panel">
<p id="construct">Construct Suffix Array</p>
<p id="search">Tìm kiếm</p>
<p id="LCP" class="execAction" onclick=doLCP()>Longest Common Prefix</p>
<p id="LRS" class="execAction" onclick=doLRS()>Longest Repeated Substring</p>
<p id="LCS">Longest Common Substring</p>
</div>
<div id="actions-hide" class="panel-hide"><img src="../img/arrow_white_right.png" alt=">" title="show/hide actions panel" /></div>
<div id="actions-extras">
<div class="construct action-menu-pullout">
<div id="construct-input" class="new-menu-option"><input type="text" id="T" autocomplete="off" value="GATAGACA$" /></div>
<div id="construct-go" class="execAction coloured-menu-option" onclick=constructSuffixArray()><p>Go</p></div>
<div id="construct-err" class="err"></div>
</div>
<div class="search action-menu-pullout">
<div id="search-input" class="new-menu-option"><input type="text" id="search_inp" autocomplete="off" value="GA" /></div>
<div id="search-go" class="execAction coloured-menu-option" onclick=doSearch()><p>Go</p></div>
<div id="search-err" class="err"></div>
</div>
<div class="lcp action-menu-pullout">
<div id="lcp-err" class="err"></div>
</div>
<div class="lrs action-menu-pullout">
<div id="lrs-err" class="err"></div>
</div>
<div class="lcs action-menu-pullout">
<div id="lcs-input" class="new-menu-option"><input type="text" id="s1" autocomplete="off" value="CATA#" style="border-right: 1px solid #777;" /><input type="text" id="s2" autocomplete="off" value="GATAGACA$" /></div>
<div id="lcs-go" class="execAction coloured-menu-option" onclick=doLCS()><p>Go</p></div>
<div id="lcs-err" class="err"></div>
</div>
</div>
<div id="bottom-bar">
<a id="trigger-about">Về</a>
<a id="trigger-team">Nhóm</a>
<a id="trigger-terms">Điều khoản sử dụng</a>
</div>
<div id="about" class="overlays">
<h4>Về</h4><span class='close-overlay'>&#x2715;</span>
<div class='content'>
VisuAlgo được lên ý tưởng vào năm 2011 bởi tiến sĩ Steven Halim như là một công cụ để giúp những sinh viên của ông ấy có thể hiểu rõ hơn về các cấu trúc dữ liệu và thuật toán, bằng cách cho phép họ tự học những nội dung cơ bản nhất với tiến độ phù hợp với riêng họ.<br>VisuAlgo chứa rất nhiều thuật toán nâng cao đã được thảo luận trong cuốn sách của Tiến sĩ Steven Halim (&#39;Competitive Programming&#39;, đồng tác giả với anh trai của ông ấy, tiến sĩ Felix Halim) và hơn thế nữa. Hiện tại, một số mô phỏng/hiệu ứng hoạt hình của các thuật toán nâng cao này chỉ có thể tìm thấy ở VisuAlgo.<div>Mặc dù được thiết kế đặc biệt cho những sinh viên đại học quốc gia Singapore (phải học rất nhiều môn học về cấu trúc dữ liệu và thuật toán - ví dụ: CS1010, CS1020, CS2010, CS2020, CS3230, and CS3230), như những người ủng hộ việc học trực tuyến, chúng tôi hi vọng rằng những người quan tâm tới cấu trúc dữ liệu và thuật toán trên toàn thế giới cũng có thể thấy những mô tả này là hữu dụng.<br>Ngay từ đầu, VisuAlgo không được thiết kế để làm việc tốt trên những màn hình cảm ứng nhỏ (ví dụ như smartphones) do việc mô phỏng các thuật toán phức tạp cần rất nhiều điểm ảnh và cử chỉ nhấp và kéo để tương tác. Độ phân giải màn ảnh nhỏ nhất cho trải nghiệm người dùng chấp nhận được là 1024x768 và chỉ có duy nhất trang đích là tương đối thân thiện với bản di động.</div><div>VisuAlgo là một dự án liên tục và nhiều mô phỏng phức tạp vẫn đang được phát triển.<br>Cải tiến thú vị nhất là tạo và duyệt câu hỏi tự động (hệ thống câu hỏi trực tuyến) cho phép sinh viên kiểm tra kiến thức cơ bản về các cấu trúc dữ liệu và thuật toán. Các câu hỏi được tạo ngẫu nhiên thông qua những quy luật và câu trả lời của sinh viên sẽ được chấm điểm tự động và ngay lập tức dựa trên việc nộp bài tới server chấm điểm của chúng tôi. Hệ thống câu hỏi trực tuyến này, khi mà nó được chấp nhận bởi nhiều giảng viên CS trên toàn thế giới, sẽ xóa bỏ mặt kĩ thuật các câu hỏi về cấu trúc dữ liệu và thuật toán cơ bản khỏi các kỳ thi khoa học máy tính điển hình tại rất nhiều trường đại học. Bằng cách đặt một tiêu chí chấm điểm nhỏ (nhưng khác 0) vào việc vượt qua các câu hỏi trực tuyến, giảng viên CS có thể làm tăng (một cách đáng kể) sự thành thạo của những sinh viên trên những câu hỏi cơ bản này khi họ một lượng vô số các câu hỏi thực tế cho sự luyện tập cái mà có thể được kiểm chứng ngay lập tức trước khi họ làm câu hỏi trực tuyến. Hiện tại, chế độ hướng dẫn bao gồm các câu hỏi cho 12 module mô phỏng. Chúng tôi sẽ sớm thêm vào 8 module mô phỏng còn lại để cho tất cả các module mô phỏng ở VisuAlgo đều có phần câu hỏi trực tuyến.<br>Một cải tiến hấp dẫn khác là việc quốc tế hóa các dự án nhánh của VisuAlgo. Chúng tôi muốn chuẩn bị cơ sở dữ liệu các thuật ngữ CS cho các văn bản tiếng Anh đã từng xuất hiện trên hệ thống VisuAlgo. Đây là một nhiệm vụ lớn và cần điện toán đám đông. Một khi hệ thống đã sẵn sàng, chúng tôi sẽ mời người dùng VisuAlgo đóng góp, đặc biệt là khi bạn không phải là người nói tiếng Anh bản ngữ. Hiện tại, chúng tôi cũng đang viết những ghi chú về VisuAlgo bằng những ngôn ngữ khác nhau.<br></div>
<a href="https://weibo.com/p/230418436e9ee80102v4rk" target='_blank'><u>zh</u></a>, <a href='https://www.facebook.com/notes/steven-halim/httpidvisualgonet-visualisasi-struktur-data-dan-algoritma-dengan-animasi/10153236934439689' target='_blank'><u>id</u></a>, <a href="https://blog.naver.com/visualgo_nus" target='_blank'><u>kr</u></a>, <a href='https://www.facebook.com/groups/163215593699283/permalink/824003417620494/' target='_blank'><u>vn</u></a>, <a href='http://pantip.com/topic/32736343' target='_blank'><u>th</u></a>.</p>
</div>
</div>
<div id="team" class="overlays">
<h4>Nhóm</h4><span class='close-overlay'>&#x2715;</span>
<div class='content'>
<p>
<strong><span style='line-height: 150%;'>Trưởng dự án và cố vấn (từ tháng 7/2011 đến nay)</span></strong><br>
<a href='http://www.comp.nus.edu.sg/~stevenha/' target='_blank'>Dr Steven Halim</a>, Senior Lecturer, School of Computing (SoC), National University of Singapore (NUS)<br>
<a href='http://felix-halim.net/' target='_blank'>Dr Felix Halim</a>, Software Engineer, Google (Mountain View)
</p>
<p>
<strong><span style='line-height: 150%;'>Những nhà nghiên cứu sinh viên 1 (Jul 2011-Apr 2012)</span></strong><br>
Koh Zi Chun, <a href='http://roticv.rantx.com/' target='_blank'>Victor Loh Bo Huai</a>
</p>
<p>
<strong><span style='line-height: 150%;'>Đồ án năm cuối/ sinh viên UROP 1 (Jul 2012-Dec 2013)</span></strong><br>
Phan Thi Quynh Trang, Peter Phandi, Albert Millardo Tjindradinata, Nguyen Hoang Duy
</p>
<p>
<strong><span style='line-height: 150%;'>Đồ án năm cuối/ sinh viên UROP 2 (Jun 2013-Apr 2014)</span></strong><br>
<a href='http://www.rosemarietan.com/' target='_blank'>Rose Marie Tan Zhao Yun</a>, Ivan Reinaldo
</p>
<p>
<strong><span style='line-height: 150%;'>Những nhà nghiên cứu sinh viên 2 (May 2014-Jul 2014)</span></strong><br>
Jonathan Irvin Gunawan, Nathan Azaria, Ian Leow Tze Wei, Nguyen Viet Dung, Nguyen Khac Tung, Steven Kester Yuwono, Cao Shengze, Mohan Jishnu
</p>
<p>
<strong><span style='line-height: 150%;'>Đồ án năm cuối/ sinh viên UROP 3 (Jun 2014-Apr 2015)</span></strong><br>
Erin Teo Yi Ling, Wang Zi
</p>
<p>
<strong><span style='line-height: 150%;'>Đồ án năm cuối/ sinh viên UROP 4 (Jun 2016-Dec 2017)</span></strong><br>
Truong Ngoc Khanh, John Kevin Tjahjadi, Gabriella Michelle, Muhammad Rais Fathin Mudzakir
</p>
<p>
List of translators who have contributed &ge;100 translations can be found at <a href="https://visualgo.net/statistics">statistics</a> page.
</p>
<p>
<strong><span style='line-height: 150%;'>Lời cảm ơn</span></strong><br>
This project is made possible by the generous <a href="http://www.cdtl.nus.edu.sg/teg/" target="_blank">Teaching Enhancement Grant</a> from NUS Centre for Development of Teaching and Learning (CDTL).
</p>
</div>
</div>
<div id="termsofuse" class="overlays">
<h4>Điều khoản sử dụng</h4><span class='close-overlay'>&#x2715;</span>
<div class='content'>
VisuAlgo miễn phí đối với cộng đồng Khoa học Máy tính trên toàn thế giới. Nếu bạn yêu thích VisuAlgo, khoản chi phí duy nhất mà chúng tôi muốn bạn chi trả chính là hãy nói cho những <b>sinh viên/ giảng viên ngành khoa học máy tính</b> mà bạn biết<b> về sự tồn tại của VisuAlgo</b> =) thông qua Facebook, Twitter, trang web về khóa học, blog review, email , v.v &amp; v.v. Nếu bạn là một<b> sinh viên/ giảng viên</b> ngành cấu trúc dữ liệu và thuật toán, bạn được phép sử dụng website này một cách trực tiếp trong các lớp học của bạn. Nếu bạn lấy những ảnh chụp màn hình (videos) từ website này, bạn có thể sử dụng chúng ở bất kỳ đâu, miễn là có dẫn nguồn URL của website này (http://visualgo.net) và/hoặc liệt kê các công bố ở dưới như là tài liệu tham khảo. Tuy nhiên, bạn <b>KHÔNG</b> được phép tải xuống các tập tin VisuAlgo (phía máy trạm) và lưu trữ nó ở website riêng của bạn vì nó được coi là <b>đạo ý tưởng</b> .Hiện tại, chúng tôi <b>KHÔNG</b> cho phép những người khác chia nhỏ dự án này và tạo ra những phiên bản khác của VisuAlgo. Việc sử dụng bản sao ngoại tuyến của VisuAlgo (phía máy trạm) cho mục đích cá nhân của bạn thì có thể chấp nhận được.<br>Lưu ý rằng hệ thống câu hỏi trực tuyến của VisuAlgo có phần dữ liệu phía máy chủ rất lớn và không dễ dàng để lưu lại mã kịch bản phía máy chủ và cơ sở dữ liệu một cách cục bộ. Hiện tại, mọi người chỉ có thể sử dụng "chế độ đào tạo" để truy cập hệ thống câu hỏi trực tuyến này. Chế độ kiểm tra hiện là môi trường có kiểm soát hơn cho việc sử dụng những câu hỏi được tạo ngẫu nhiên này và tự động kiểm duyệt cho kỳ thi <b>thật sự</b> tại Đại học Quốc gia Singapore<span style="white-space: normal;">.</span> Những giảng viên quan tâm tới khoa học máy tính có thể liên hệ với Steven nếu muốn trải nghiệm "chế độ kiểm tra"<br><b>Danh sách phát hành</b><br>Dự án này đươc trình bày một cách vắn tắt ở Hội thảo CLI tại ACM ICPC World Finals 2012 (Warsaw, Ba Lan) và tại Hội nghị IOI 2012 (Sirmione-Montichiari, Italy). Bạn có thể nhấn vào link này để đọc bài viết năm 2012 của chúng tôi về hệ thống này (nó không được gọi là VisuAlgo vào năm 2012)<br>Dự án này được hoàn thiện hầu hết bởi những cựu sinh viên của tôi. Báo cáo cuối cùng gần đây nhất là của: <a href="http://188.166.247.199/visualgo/visualgo-laravel/public/translation/fyp/erin-report.pdf" target="_blank">Erin</a>, <a href="http://188.166.247.199/visualgo/visualgo-laravel/public/translation/fyp/wangzi-report.pdf" target="_blank">Wang Zi</a>, <a href="http://188.166.247.199/visualgo/visualgo-laravel/public/translation/fyp/rose-report.pdf" target="_blank">Rose</a>, <a href="http://188.166.247.199/visualgo/visualgo-laravel/public/translation/fyp/ivan-report.pdf" target="_blank">Ivan</a>.<br><b>Báo cáo lỗi hoặc đề xuất tính năng mới</b><br>VisuAlgo là một dự án chưa hoàn thiện. Tiến sĩ Steven Halim vẫn đang tiếp tục phát triển VisuAlgo một cách tích cực/ Nếu bạn đang sử dụng VisuAlgo và phát hiện ra lỗi ở bất kỳ trang mô phỏng/ công cụ câu hỏi trực tuyến nào của chúng tôi hoặc nếu bạn muốn đề xuất những tính năng mới, hãy liên lạc với Tiến sĩ Steven Halim. Địa chỉ liên lạc của ông ấy là stevenhalim@gmail.com<br>
</div>
</div>

<script src="../js/jquery-3.3.1.min.js"></script>
<script>
      var PHP_DOMAIN = "";

      // surprise colour!
      // Referenced to in  home.js and viz.js also
      var colourArray = ["#52bc69", "#d65775"/*"#ed5a7d"*/, "#2ebbd1", "#d9513c", "#fec515", "#4b65ba", "#ff8a27", "#a7d41e"]; // green, pink, blue, red, yellow, indigo, orange, lime

      function disableScroll() { $('html').css('overflow', 'hidden'); }

      function enableScroll() { $('html').css('overflow', 'visible'); }

      function replaceAll(find, replace, str) { return str.replace(new RegExp(find, 'g'), replace); }

      function getColours() {
        var generatedColours = new Array();
        while (generatedColours.length < 4) {
          var n = (Math.floor(Math.random() * colourArray.length));
          if ($.inArray(n, generatedColours) == -1)
            generatedColours.push(n);
        }
        return generatedColours;
      }

      function isOn(value, position) {
        return (value>>position) & 1 === 1;
      }

      function customAlert(msg) {
        $('#custom-alert p').html(msg);
        var m = -1 * ($('#custom-alert').outerHeight()/2);
        $('#custom-alert').css('margin-top', m+'px');
        $('#dark-overlay').fadeIn(function() {
          $('#custom-alert').fadeIn(function() {
            setTimeout(function() {
              $('#custom-alert').fadeOut(function() {
                $('#dark-overlay').fadeOut();
              });
            }, 1000);
          });
        });
      }

      function showLoadingScreen() {
        $('#loading-overlay').show();
        $('#loading-message').show();
      }

      function hideLoadingScreen() {
        $('#loading-overlay').hide();
      }

      function commonAction(retval, msg) {
        //setTimeout(function() {
          if (retval) { // mode == "exploration" && // now not only for exploration mode, but check if this opens other problems
            $('#current-action').show();
            $('#current-action').html(mode == "exploration" ? msg : ("e-Lecture Example (auto play until done)<br>" + msg));
            $('#progress-bar').slider("option", "max", gw.getTotalIteration()-1);
            triggerRightPanels();
            isPlaying = true;
          }
        //}, 500);
      }

      function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split('&');
        for (var i = 0; i < vars.length; i++) {
          var pair = vars[i].split('=');
          if (decodeURIComponent(pair[0]) == variable)
            return decodeURIComponent(pair[1]);
        }
        return "";
      }

      var generatedColours = getColours();
      var surpriseColour = colourArray[generatedColours[0]];
      var colourTheSecond = colourArray[generatedColours[1]];
      var colourTheThird = colourArray[generatedColours[2]];
      var colourTheFourth = colourArray[generatedColours[3]];

      $(function() {
        $('.links').css('background', surpriseColour);
        $('.right-links').css('background', surpriseColour);
        $('#login-go').css('background', surpriseColour);

        $('.colour').css("color", surpriseColour); // name
        $('h4').css("background-color", surpriseColour); // about, contact us etc. button background

        // title
        $('#title a').click(function() {
          $('#title a').removeClass('selected-viz');
          $(this).addClass('selected-viz');
          // temporary quick fix for Google Chrome Aug 2016 issue...
          setTimeout(function(){ document.body.style.zoom = "100.1%"; }, 100); // force resize/redraw...
          setTimeout(function(){ document.body.style.zoom = "100%"; }, 600);
        });

        // overlays stuffs
        $('#trigger-about').click(function() {
          if ($(window).width() > 600) {
            $('#dark-overlay').fadeIn(function() {
              $('#about').fadeIn();
            });
          }
          else
            alert('Sorry, this dialog is too big. Please load it on bigger screen');
        });

        $('#trigger-team').click(function() {
          if ($(window).width() > 600) {
            $('#dark-overlay').fadeIn(function() {
              $('#team').fadeIn();
            });
          }
          else
            alert('Sorry, this dialog is too big. Please load it on bigger screen');
        });

        $('#trigger-terms').click(function() {
          if ($(window).width() > 600) {
            $('#dark-overlay').fadeIn(function() {
              $('#termsofuse').fadeIn();
            });
          }
          else
            alert('Sorry, this dialog is too big. Please load it on bigger screen');
        });

        $('.close-overlay').click(function() {
          $('.overlays').fadeOut(function() {
            $('#dark-overlay').fadeOut();
          });
        });

        $('#dark-overlay').click(function() {
          $('.overlays').fadeOut();
          $('#dark-overlay').fadeOut();
        });

        $.get('/isloggedin', function(data) {
          var isLoggedIn = data['isloggedin'] == '1';
          var element;
          if (isLoggedIn) {
            // element = '<a onclick="verifyLogout()">Đăng Xuất<div><br></div></a>';
            element = '<a href="https://visualgo.net/profile">Profile</a>'; 
          }
          else {
            element = '<a href="https://visualgo.net/login">Đăng nhập</a>'
          }
          $('#useraccount').html(element);
        });
      });

      function verifyLogout() {
        // Steven's remarks: use a better 'confirm' than the default :(
        var doesLogout = confirm('Are you sure to logout?');
        if (doesLogout == true) {
          window.location = "https://visualgo.net/logout";
        }
      }

      function checkLogin() {
        $.get('/checklogin', function(data) {
          var url = data['url'];
          window.location.href = '/' + url;
        });
      }

      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','../../www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-1566631-4', 'auto');
      ga('send', 'pageview');
    </script>

<script src="../js/jquery-ui.min.js"></script>

<script src="../js/d3.min.js"></script>
<script src="../js/viz-1.0.3.js"></script>
<script src="../js/visualgo_print.js"></script>
<script src="../js/graph_library.js"></script>
<script>
      function runSlide(slide) {
        if (slide == '1') {
          $("#e-lecture").html("slide " + slide + " (" + 12 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '2') {
          $("#e-lecture").html("slide " + slide + " (" + 25 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '3') {
          $("#e-lecture").html("slide " + slide + " (" + 37 + "%)");
          
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '4') {
          $("#e-lecture").html("slide " + slide + " (" + 50 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '99') {
          $("#e-lecture").html("slide " + slide + " (" + 62 + "%)");
          
          hideEntireActionsPanel();
 
          showStatusPanel();
          showCodetracePanel();
      
        }
        if (slide == '99-1') {
          $("#e-lecture").html("slide " + slide + " (" + 75 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '99-2') {
          $("#e-lecture").html("slide " + slide + " (" + 87 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '99-3') {
          $("#e-lecture").html("slide " + slide + " (" + 100 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
      }

      window.onpopstate = function(event) {
        var slide = event.state['slide'];
        openSlide(slide, function() {
          runSlide(slide);
        });
      };

      function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'), sParameterName, i;

        for (i = 0; i < sURLVariables.length; i++) {
          sParameterName = sURLVariables[i].split('=');
          if (sParameterName[0] === sParam) return sParameterName[1] === undefined ? true : sParameterName[1];
        }
      };

      function pushState(slideValue) {
        var url = '/vi/suffixarray';
        if (typeof slideValue != 'undefined' && slideValue != null) url += '?slide=' + slideValue;
        window.history.pushState({slide: slideValue}, "slide " + slideValue, url);
      }

      function showPopup(callback) {
        $('#popup').fadeIn(100, callback);
      }

      function hidePopup(callback) {
        $('#popup').fadeOut(100, callback);
      }

      function showOverlay() {
        $('#overlay').css('opacity', 0.5); 
        $('#overlay').show();
      }

      function hideOverlay() {
        $('#overlay').hide();
        $("#e-lecture").html("");
      }

      function makeOverlayTransparent() {
        $('#overlay').css('opacity', 0);
      }

      function hideSlide(callback) {
        isPlaying = true;
        closeSlide(cur_slide, function() {
          makeOverlayTransparent();
          setTimeout(callback, 700); // don't immediately run the animation, wait for 500ms+ first
        });
      }

      function showSlide() {
        isPlaying = false;
        openSlide(cur_slide);
        showOverlay();
      }

      $(function() {
        var slide = getUrlParameter('slide');
        
        $.get('/hasvisited' + '/suffixarray', function(data) {
          var hasVisited = data['hasvisited'] == '1';
          if (!hasVisited) {
            var postData = {
              '_token': 'iVivZ7KRPe6XK7pbuGtOoEjljE1xyBVNhLKNFuF8',
              'page': '/suffixarray'.substring(1),
            };

            $.post("/visitpage", postData, function(data) {
              // non critical request...
            });

            if (typeof slide != undefined && slide != null) {
              cur_slide = slide;
            }

            $("#mode-menu a").trigger("click");
          }
          else {
            if (typeof slide != undefined && slide != null) {
              cur_slide = slide;
              $('#mode-menu a').click();
            }    
          }
        }).fail(function() {
          if (typeof slide != undefined && slide != null) {
            cur_slide = slide;
            $('#mode-menu a').click();
          }
        });

        $('.mcq-submit').click(function() {
          var questionId = parseInt($(this).attr('id').split('-')[1]);
          var answer = $('#mcq-answer-' + questionId).val();
          var userAnswer = $('input[type=radio][name=mcq-'+questionId+'-choice]:checked').val();

          if (answer === userAnswer) {
            $('#answer-status-' + questionId).html('<font color="green"><b>Correct!</b></font>');
          }
          else {
            $('#answer-status-' + questionId).html('<font color="red"><b>Wrong Answer! Try again...</b></font>');
          }
          $('#answer-status-' + questionId).show();
          setTimeout(function() {
            $('#answer-status-' + questionId).fadeOut(1000);
          }, 1000);
        });

        $('.msq-submit').click(function() {
          var questionId = parseInt($(this).attr('id').split('-')[1]);
          var answer = $('#msq-answer-' + questionId).val();

          var answers = [];
          $('input[type=checkbox][class=msq-choice]:checked').each(function() {
            answers.push($(this).attr('id').split('-')[3]);
          });
          answers.sort();
          var userAnswer = answers.join(',');

          if (answer === userAnswer) {
            $('#answer-status-' + questionId).html('<font color="green">Correct!</font>');
          }
          else {
            $('#answer-status-' + questionId).html('<font color="red">Wrong Answer! Try again...</font>');
          }
          $('#answer-status-' + questionId).show();
          setTimeout(function() {
            $('#answer-status-' + questionId).fadeOut(1000);
          }, 1000);
        });

        $('select.lecture-dropdown').change(function() {
          var nextSlide = $(this).val();
          openSlide(nextSlide, function() {
            runSlide(nextSlide);
            pushState(nextSlide);
          });
        });

        $('#hide-popup').click(function() {
          hidePopup();
        });

        $('#popup').hover(function() {
          $('#hide-popup').show();
        }, function() {
          $('#hide-popup').hide();
        });

        $('#electure-1 .electure-next').click(function() {
          hidePopup();
          runSlide('2');
          pushState('2');
        });
      
        $('#electure-2 .electure-next').click(function() {
          hidePopup();
          runSlide('3');
          pushState('3');
        });
        $('#electure-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('1');
          pushState('1');
        });
      
        $('#electure-3 .electure-next').click(function() {
          hidePopup();
          runSlide('4');
          pushState('4');
        });
        $('#electure-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('2');
          pushState('2');
        });
      
        $('#electure-4 .electure-next').click(function() {
          hidePopup();
          runSlide('99');
          pushState('99');
        });
        $('#electure-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('3');
          pushState('3');
        });
      
        $('#electure-99 .electure-next').click(function() {
          hidePopup();
          runSlide('99-1');
          pushState('99-1');
        });
        $('#electure-99 .electure-prev').click(function() {
          hidePopup();
          runSlide('4');
          pushState('4');
        });
      
        $('#electure-99-1 .electure-next').click(function() {
          hidePopup();
          runSlide('99-2');
          pushState('99-2');
        });
        $('#electure-99-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('99');
          pushState('99');
        });
      
        $('#electure-99-2 .electure-next').click(function() {
          hidePopup();
          runSlide('99-3');
          pushState('99-3');
        });
        $('#electure-99-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('99-1');
          pushState('99-1');
        });
      
        $('#electure-99-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('99-2');
          pushState('99-2');
        });
      
 

        // temporary quick fix for Google Chrome Aug 2016 issue..., put at last part so that everything else has been loaded
        // setTimeout(function(){ document.body.style.zoom = "100.1%"; }, 500);
        // setTimeout(function(){ document.body.style.zoom = "100%"; }, 600);
        // I turn it off on 14 June 2018, seems 'ok'?
      });


      function adjustPopupToImageSize() {
        var width = $('#popup-image').prop('width');
        var height = $('#popup-image').prop('height');
        $('#popup').width(width + 20);
        $('#popup').height(height + 20);
        if (width == 0 && height == 0) {
          setTimeout(adjustPopupToImageSize, 200);
        } else {
          showPopup();  
        }
      }

      function POPUP_IMAGE(url) {
        $('#popup-content').html('<img id="popup-image" src="' + url + '">');
        adjustPopupToImageSize();
      }

      function URL(url.html) {
        window.open(url, '_blank');
      }

      // Implement these functions in each visualisation
      // This function will be called before entering e-Lecture Mode
      function ENTER_LECTURE_MODE() {}

      // This function will be called before returning to Explore Mode
      function ENTER_EXPLORE_MODE() {}

      // Lecture action functions
      function CUSTOM_ACTION(action, data, mode) {}
    </script>
<script type="text/javascript">
// Suffix Array Widget
// original author: Nguyen Hoang Duy, then maintained by Steven Halim

var SuffixArrayWidget = function() {
  var self = this;
  var graphWidget = new GraphWidget();

  var coord = new Array();
  var A = new Array();
  var amountVertex = 0;
  var amountEdge = 0;

  var stateList = [];
  var edgeGenerator = d3.svg.line()
  .x(function(d){return d.x;})
  .y(function(d){return d.y;})
  .interpolate("linear");
  var mousedown_node = null;
  var mousemove_coor = null;
  var edgeList = [];
  var mousedown_in_progress = false, mousemove_in_progress = false, mouseup_in_progress = false;
  var mousedown_event = null, mousemove_event = null, mouseup_event = null;
  var deleted_vertex_list = [];
  var used_alt = -1;
  var adjMatrix = [], adjList = [];
  var aborted_mousedown = false;
  var move1 = true;
  var screenHeight = window.innerHeight-100;
  var screenWidth = window.innerWidth-80;
  var firstNode = -1;
  var isCheckingPointInside = false;
  var cutPolygonState = 0;
  var isPreviousPointInsde = false;
  var isPolygon = false;
  var coord_idx = new Array();
  var coord_data = new Array();
  var suffix_table = new Array();
  var SA = new Array();
  var LCP = new Array();
  var c, r = 0;
  var tempSA = new Array(), SA = new Array(), RA = new Array(), tempRA = new Array();
  var previous_option = null;
  var left_start = 50;

  mainSvg.style("class", "unselectable");

  mainSvg.attr("height", screenHeight);
  mainSvg.attr("width", screenWidth);
  //graphWidget.addRectVertex(100, 100, "ABC", 1, true);

  function resetEverything() {
    coord = new Array();
    A = new Array();
    amountVertex = 0;
    amountEdge = 0;
    //graphWidget = new GraphWidget();
    stateList = [];
    edgeGenerator = d3.svg.line()
    .x(function(d){return d.x;})
    .y(function(d){return d.y;})
    .interpolate("linear");
    mousedown_node = null;
    mousemove_coor = null;
    edgeList = [];
    mousedown_in_progress = false, mousemove_in_progress = false, mouseup_in_progress = false;
    mousedown_event = null, mousemove_event = null, mouseup_event = null;
    deleted_vertex_list = [];
    used_alt = -1;
    adjMatrix = [];
    adjList = [];
    aborted_mousedown = false;
    firstNode = -1;
    isCheckingPointInside = false;
    cutPolygonState = 0;
    isPreviousPointInsde = false;
    isPolygon = false;
    coord_idx = new Array();
    coord_data = new Array();
    suffix_table = new Array();
    SA = new Array();
    LCP = new Array();
    tempSA = new Array(), SA = new Array(), RA = new Array(), tempRA = new Array();
    previous_option = null;
  }

  function createState(lower_bound) {
    var state = {
      "vl":{},
      "el":{},
      "status":{}
    };

    var y0 = 50;
    for (var i = 0; i < Object.size(coord_idx); i++) {
      for (var j = 0; j < Object.size(coord_idx[0]); j++) {
        var key = i.toString() + "_" + j.toString();
        state["vl"][key] = {};
        state["vl"][key]["state"] = VERTEX_RECT;
        if (i == 0 && j == 0) {
          state["vl"][key]["cx"] = left_start;
          state["vl"][key]["cy"] = 40 + i*30;
          state["vl"][key]["text"] = "i";        
          continue;  
        }
        if (j == 0) {
          state["vl"][key]["cx"] = left_start;
          state["vl"][key]["cy"] = 40 + i*30;
          state["vl"][key]["text"] = i-1;    
          continue;
        }        
        state["vl"][key]["cx"] = coord_idx[i][j];
        state["vl"][key]["cy"] = 40 + i*30;
        state["vl"][key]["text"] = coord_data[i][j];
      }
    }

    return state;
  }

  this.getGraphWidget = function() { return graphWidget; }
  
  this.getAmountVertex = function() { return amountVertex; }

  this.getAmountEdge = function() { return amountEdge; }

  function dist2P(x1, y1, x2, y2) {
    return Math.sqrt((x1-x2)*(x1-x2) + (y1-y2)*(y1-y2));
  }

  // return the circle class id if is inside the circle
  // return -1 if free
  function isUsed(x,y) {
    var i, j;
    for (i = 0; i < amountVertex; i++) {
      if (dist2P(x, y, coord[i][0], coord[i][1]) <= 35)
       return i;
   }
   return -1;
  }

  function colorNode(cs, row_id, column_id) {
    cs["vl"][row_id.toString() + "_" + column_id.toString()]["state"] = VERTEX_HIGHLIGHTED_RECT;
  }

  function colorColumn(cs, column_id) {
    for (var i = 0; i < Object.size(coord_idx); i++)
      cs["vl"][i.toString() + "_" + column_id.toString()]["state"] = VERTEX_HIGHLIGHTED_RECT;
  }

  function colorRow(cs, row_id) {
    for (var i = 0; i < Object.size(coord_idx[0]); i++)
      cs["vl"][row_id.toString() + "_" + i.toString()]["state"] = VERTEX_HIGHLIGHTED_RECT;
  }

  function colorResultRow(cs, row_id) {
    for (var i = 0; i < Object.size(coord_idx[0]); i++)
      cs["vl"][row_id.toString() + "_" + i.toString()]["state"] = VERTEX_RESULT_RECT;
  }

  // Note: data.size must = no of rows
  function addColumn(data) {
    for (var i = 0; i < Object.size(data); i++) {
      var tmp = new Array();
      tmp.push(data[i]);
      appendRow(i, tmp);
    }
  }

  function appendRow(row_id, data) {
    var cur_y = 50 + 30*row_id;
    var sz = Object.size(coord_idx[row_id]);
    for (var i = 1; i <= Object.size(data); i++) {
      coord_idx[row_id][sz] = coord_idx[row_id][sz-1] + 150;
      coord_data[row_id][sz] = data[i-1];
      graphWidget.addRectVertex(coord_idx[row_id][sz], cur_y, data[i-1], row_id.toString() + "_" + sz.toString(), true, "rect_long");
      sz++;
    }
  }

  function addRow(data) {
    var sz = Object.size(coord_idx);
    coord_idx[sz] = new Array();
    coord_idx[sz][0] = left_start;
    coord_data[sz] = new Array();
    var cur_y = 40 + 30*sz;
    if (sz == 0)
      graphWidget.addRectVertex(left_start, cur_y, "i",  sz.toString() + "_0", true, "rect");
    else 
      graphWidget.addRectVertex(left_start, cur_y, (sz-1).toString(),  sz.toString() + "_0", true, "rect");
    for (var i = 1; i <= Object.size(data); i++) {
      coord_idx[sz][i] = coord_idx[sz][i-1] + 150; // unable to customize the column width well yet...
      coord_data[sz][i] = data[i-1];
      if (i == 1) coord_idx[sz][i] = coord_idx[sz][i-1] + 50;
      graphWidget.addRectVertex(coord_idx[sz][i], cur_y, data[i-1], sz.toString() + "_" + i.toString(), true, "rect_long");
    }
  }

  this.clrscr = function() {
    clearScreen();
  }
  
  function clearScreen() {
    var i, j;
    
    for (i = 0; i <= 500; i++) {
      try {
        graphWidget.removeEdge(i);
      } catch(err) {}
    }
    
    for (i = 0; i <= 500; i++) {
      try {
        graphWidget.removeVertex(i);
      } catch(err) {}
    }

    for (i = 0; i <= 30; i++)
      for (j = 0; j <= 5; j++)
        mainSvg.selectAll(".v" + i.toString() + "_" + j.toString()).remove();

    try {
      graphWidget.removeVertex(0);
    } catch (err) {}

    mainSvg.selectAll(".edgelabel").remove();
    mainSvg.selectAll("text").remove();
    amountVertex = 0;
    resetEverything();
  }  

  function stringCmp(a, b) {
    for (var i = 0; i < Math.min(a.length, b.length); i++) {
      if (a[i] < b[i]) return -1;
      else if (a[i] > b[i]) return 1;
    }
    if (a.length == b.length) return 0;
    else if (a.length > b.length) return 1;
    return -1;
  }

  
  function countingSort(T, k) {
    var SAText = T;
    var n = SAText.length;
    var i, sum, maxi = Math.max(300, n); // up to 255 ASCII chars or length of n
    c = new Array();
    for (var i = 0; i < 300; i++) c.push(0);
    for (i = 0; i < n; i++) // count the frequency of each rank
      c[i+k < n ? RA[i+k] : 0]++;
    sum = 0;
    for (i = 0; i < maxi; i++) {                     
      var t = c[i]; c[i] = sum; sum += t;
    }
    for (i = 0; i < n; i++) // shuffle the suffix array if necessary
      tempSA[c[SA[i]+k < n ? RA[SA[i]+k] : 0]++] = SA[i];
    for (i = 0; i < n; i++) // update the suffix array SA
      SA[i] = tempSA[i];
  }

  this.constructSA = function(T) { // this version can go up to 100000 characters
    clearScreen();
    populatePseudocode(0);
    var i, k, r;
    var cs = createState();
    var stateList = new Array();
    var n = T.length;

    var data = ["SA[i]", "Suffix", "RA[SA[i]]", "RA[SA[i]+k]", "tempRA[i]"];
    addRow(data);
    for (i = 0; i < n; i++) { 
      RA.push(T.charCodeAt(i));
      SA.push(i);
      var tmp = new Array();
      tmp.push(i);
      tmp.push(T.substring(i));
      tmp.push(T.charCodeAt(i));
      tmp.push(i+1 < n ? T.charCodeAt(i+1) : 0);
      tmp.push(0);
      addRow(tmp);
      tempRA.push(0);
    }
    cs = createState();
    cs["status"] = 'Initialize SA[] with [0..n-1]<br>Initialize RA[] with ASCII values of the characters in T (k = 1)';
    cs["lineNo"] = 1;
    stateList.push(cs);

    if (T.charAt(n-1) != '$') {
      cs = createState();
      cs["status"] = 'WARNING... T does not end with a special symbol &#39;$&#39;<br>The result of this algorithm is not guaranteed';
      cs["lineNo"] = 1;
      stateList.push(cs);
    }

    for (k = 1; k < n; k <<= 1) { // repeat sorting process log n times
      var SA_old = deepCopy(SA);
      countingSort(T, k); // actually radix sort: sort based on the second item
      countingSort(T, 0); // then (stable) sort based on the first item
      for (i = 0; i < n; i++) {
        coord_data[i+1][1] = SA[i];
        coord_data[i+1][2] = T.substring(SA[i]);
        if (k == 1) {
          coord_data[i+1][3] = T.charCodeAt(SA[i]);
          if (SA[i] < n-1) coord_data[i+1][4] = T.charCodeAt([SA[i]+1]);
          else             coord_data[i+1][4] = 0;
        }
        else {
          coord_data[i+1][3] = RA[SA[i]];
          coord_data[i+1][4] = RA[SA[i]+k];
          if (SA[i]+k >=n) coord_data[i+1][4] = 0;
          coord_data[i+1][5] = RA[SA[i]];
        }
      }

      cs = createState();
      cs["lineNo"] = 2;
      cs["status"] = "k = " + k + ", ";
      if (k == 1) {
        cs["status"] += 'sort based on ranking pair of first and second characters<br>Changed rows are highlighted';
      } else if (k == 2) {
        cs["status"] += 'sort based on ranking pair of first and second pairs<br>Changed rows are highlighted';
      } else if (k == 4) {
        cs["status"] += 'sort based on ranking pair of first and second quadruples<br>Changed rows are highlighted';
      } else {
        cs["status"] += 'sort based on ranking pair (you know the drill)<br>Changed rows are highlighted';
      }

      for (i = 0; i < Object.size(SA_old); i++)
        if (SA_old[i] != SA[i])
          colorRow(cs, i+1);
      stateList.push(cs);

      cs = createState();
      colorRow(cs, 1);
      cs["status"] = 'k = ' + k + '<br>Now performing re-ranking process (tempRA[0] starts from 0)';
      cs["lineNo"] = 3;
      stateList.push(cs);

      tempRA[SA[0]] = r = 0; // re-ranking; start from rank r = 0
      for (i = 1; i < n; i++) { // compare adjacent suffices
        cs = createState();
        colorRow(cs, i+1);
        if (RA[SA[i]] == RA[SA[i-1]] && RA[SA[i]+k] == RA[SA[i-1]+k]) { // same rank
          coord_data[i+1][5] = r;
          tempRA[SA[i]] = r
          cs["status"] = "k = " + k + ', same ranking pair as previous suffix<br>Keep rank at r = {r}'.replace("{r}", r);
          cs["lineNo"] = 4;
        }
        else {
          coord_data[i+1][5] = ++r;
          tempRA[SA[i]] = r;
          cs["lineNo"] = [4, 5];
          cs["status"] = "k = " + k + ', different ranking pair as previous suffix<br>Increase rank to r = {r}'.replace("{r}", r);
        }
        stateList.push(cs);
      }

      for (i = 0; i < n; i++) { // update the rank array RA
        RA[i] = tempRA[i];
        coord_data[i+1][3] = coord_data[i+1][5];
      }
      for (i = 0; i < n; i++) {
        coord_data[i+1][3] = RA[SA[i]];
        coord_data[i+1][4] = SA[i]+k*2 < n ? RA[SA[i]+k*2] : 0;
      }

      cs = createState();
      cs["status"] = 'Updating RA[] from tempRA[]';
      cs["lineNo"] = 6; 
      colorColumn(cs, 3);
      colorColumn(cs, 4);
      stateList.push(cs);

      if (RA[SA[n-1]] == n-1) {
        cs = createState();
        cs["status"] = 'RA[SA[n-1] == n-1<br>So we are done';
        cs["lineNo"] = 7;
        stateList.push(cs);
        break;
      }
    } 

    graphWidget.startAnimation(stateList);
    return true;
  }

  function buildSA(T) {
    suffix_table = new Array();
    
    SA = new Array();
    for (var i = 0; i < T.length; i++) {
      suffix_table.push(T.substring(i));
      SA.push(i);
    }

    for (var i = 0; i < T.length-1; i++) 
      for (var j = i+1; j < T.length; j++) {
        if (suffix_table[i] > suffix_table[j]) {
          var tmp = suffix_table[i];
          suffix_table[i] = suffix_table[j];
          suffix_table[j] = tmp;
          tmp = SA[i];
          SA[i] = SA[j];
          SA[j] = tmp;
        }
      }
  }

  this.constructSA_bad = function(T) { // input size is small anyway
    clearScreen();
    var data = ["SA[i]", "LCP[i]", "Suffix T[SA[i]]"];
    addRow(data);
    buildSA(T);

    // LCP slow
    LCP = new Array();
    LCP.push(0);
    for (var i = 1; i < Object.size(SA); i++) {
      var L = 0;
      while (T[SA[i]+L] == T[SA[i-1]+L]) L++;
      LCP.push(L);
    }

    for (var i = 0; i < Object.size(SA); i++) {
      var tmp = new Array();
      tmp.push(SA[i]); tmp.push(LCP[i]); tmp.push(suffix_table[i]);
      addRow(tmp);
    }
  }

  function strncmp(str1, str2, n) {
    str1 = str1.substring(0, n);
    str2 = str2.substring(0, n);
    return ((str1 == str2) ? 0 :((str1 > str2) ? 1 : -1));
  }

  this.goSearch = function() {
    var P = document.getElementById("search_inp").value;
    var T = document.getElementById("T").value;
    populatePseudocode(1);
    this.constructSA_bad(T);
    var stateList = new Array();

    // find lower bound
    var cs = createState();
    cs["status"] = 'Find lower bound<br>The first occurrence of P = &#39;{P}&#39; in T'.replace("{P}", P);
    cs["lineNo"] = 1;
    stateList.push(cs);
    var lo = 0, hi = T.length-1, mid = lo;
    while (lo < hi) {
      mid =  Math.floor((lo+hi) / 2);
      cs = createState();
      cs["status"] = 'Low = {lo} and High = {hi}<br>So Mid = ({lo}+{hi}) / 2 = {mid}'
                      .replace("{lo}", lo)
                      .replace("{hi}", hi)
                      .replace("{lo}", lo)
                      .replace("{hi}", hi)
                      .replace("{mid}", mid);
      cs["lineNo"] = 
      colorRow(cs, lo+1); colorRow(cs, hi+1); colorRow(cs, mid+1);
      stateList.push(cs);
      cs = createState();
      colorRow(cs, lo+1); colorRow(cs, hi+1); colorRow(cs, mid+1);
      var res = strncmp(T.substring(SA[mid]), P, P.length);
      if (res >= 0) {
        hi = mid;
        cs["status"] = 'P = &#39;{P}&#39; is smaller or equal than this middle suffix &#39;{substring}&#39;<br>Adjusting High = Mid = {hi}'
                        .replace("{P}", P)
                        .replace("{substring}", T.substring(SA[mid]))
                        .replace("{hi}", hi);
      }
      else {
        lo = mid+1;
        cs["status"] = 'P = &#39;{P}&#39; is bigger than this middle suffix &#39;{substring}&#39;<br>Adjusting Low = Mid+1 = {lo}'
                        .replace("{P}", P)
                        .replace("{substring}", T.substring(SA[mid]))
                        .replace("{lo}", lo);
      }
      cs["lineNo"] = 1;
      stateList.push(cs);
    }

    if (strncmp(T.substring(SA[lo]), P, P.length) != 0) {
      cs = createState();
      cs["status"] = 'P = &#39;{P}&#39; is not found in T, exiting...'.replace("{P}", P);
      cs["lineNo"] = 3;
      stateList.push(cs);
      graphWidget.startAnimation(stateList);
      return true;
    }

    var lower_bound = lo;
    cs = createState();
    cs["status"] = 'Lower bound (suffix {SA_lo} = &#39;{substring}&#39;) is highlighted'
                    .replace("{SA_lo}", SA[lo])
                    .replace("{substring}", T.substring(SA[lo]));
    cs["lineNo"] = 1;
    colorRow(cs, lower_bound+1);

    stateList.push(cs);
    cs = createState();
    cs["status"] = 'Find upper bound<br>The last occurrence of P = &#39;{P}&#39; in T'.replace("{P}", P);
    cs["lineNo"] = 2;
    stateList.push(cs);

    // find upper bound
    var lo = 0, hi = T.length-1, mid = lo;
    while (lo < hi) {
      mid =  Math.floor((lo+hi) / 2);
      cs = createState();
      cs["status"] = 'Low = {lo} and High = {hi}<br>So Mid = ({lo}+{hi}) / 2 = {mid}'
                      .replace("{lo}", lo)
                      .replace("{hi}", hi)
                      .replace("{lo}", lo)
                      .replace("{hi}", hi)
                      .replace("{mid}", mid);
      cs["lineNo"] = 2;
      colorRow(cs, lo+1); colorRow(cs, hi+1); colorRow(cs, mid+1);
      stateList.push(cs);
      cs = createState();
      colorRow(cs, lo+1); colorRow(cs, hi+1); colorRow(cs, mid+1);
      var res = strncmp(T.substring(SA[mid]), P, P.length);
      if (res > 0) {
        hi = mid;
        cs["status"] = 'P = &#39;{P}&#39; is smaller than this middle suffix &#39;{substring}&#39;<br>Adjusting High = Mid = {hi}'
                        .replace("{P}", P)
                        .replace("{substring}", T.substring(SA[mid]))
                        .replace("{hi}", hi);
      }
      else {
        lo = mid+1;
        cs["status"] = 'P = &#39;{P}&#39; is bigger or equal than this middle suffix &#39;{substring}&#39;<br>Adjusting Low = Mid+1 = {lo}'
                        .replace("{P}", P)
                        .replace("{substring}", T.substring(SA[mid]))
                        .replace("{lo}", lo);
      }
      cs["lineNo"] = 2;
      stateList.push(cs);
    }
    if (strncmp(T.substring(SA[hi]), P, P.length) != 0) hi--;
    var h_bound = hi;

    var cs = createState();
    colorRow(cs, h_bound+1);
    cs["status"] = 'Upper bound (suffix {SA_hi} = &#39;{substring}&#39;) is highlighted'
                    .replace("{SA_hi}", SA[hi])
                    .replace("{substring}", T.substring(SA[hi]));
    cs["lineNo"] = 2;
    stateList.push(cs);

    var cs = createState();
    cs["status"] = 'Searching done<br>Results are highlighted from lower bound to upper bound';
    cs["lineNo"] = 3;
    for (var i = lower_bound+1; i < h_bound+2; i++) colorRow(cs, i);
    stateList.push(cs);

    graphWidget.startAnimation(stateList);
    return true;
  }

  this.goLCP = function() { // is it Kasai's algorithm? for computing LCP (check the proper name)
    var T = document.getElementById("T").value;
    clearScreen();
    populatePseudocode(2);
    var i, k, r;
    var cs = createState();
    var stateList = new Array();
    var n = T.length;

    var data = ["SA[i]", "Phi[i]", "PLCP[i]", "Suffix", "LCP[i]"];
    addRow(data);
    buildSA(T);

    var Phi = new Array();
    for (i = 0; i < n; i++) Phi.push(0);
    Phi[SA[0]] = -1;
    for (i = 1; i < n; i++) Phi[SA[i]] = SA[i-1];

    for (i = 0; i < n; i++) { 
      var tmp = new Array();
      tmp.push(SA[i]);
      tmp.push(0);
      tmp.push(0);
      tmp.push(T.substring(i));
      tmp.push(0);
      addRow(tmp);
    }

    coord_data[SA[0]+1][2] = Phi[SA[0]]; // -1
    cs = createState();
    cs["status"] = 'Initialize Phi, PLCP, and LCP columns';
    colorColumn(cs, 2);
    colorColumn(cs, 3);
    colorColumn(cs, 5);
    cs["lineNo"] = 1; 
    stateList.push(cs);

    for (i = 1; i < n; i++) {
      coord_data[SA[i]+1][2] = Phi[SA[i]];
      cs = createState();      
      cs["status"] = 'Updating Phi[{SA_i}] = {SA_i-1}'
                      .replace("{SA_i}", SA[i])
                      .replace("{SA_i-1}", SA[i-1]);
      cs["lineNo"] = 1;
      colorNode(cs, i, 1);
      colorNode(cs, i+1, 1);
      colorNode(cs, SA[i]+1, 2);
      stateList.push(cs);
    }

    var L = 0, PLCP = new Array();
    for (i = 0; i < n; i++) {
      if (Phi[i] == -1) {
        PLCP[i] = 0;
        continue;
      }
      while (T[i+L] == T[Phi[i]+L]) L++;
      PLCP[i] = L;
      L = L > 1 ? L-1 : 0;
    }
    for (i = 0; i < n; i++) {
      coord_data[i+1][3] = PLCP[i];
      cs = createState();
      colorRow(cs, i+1);
      cs["status"] = 'Updating PLCP[{i}]. L={PLCP_i}'
                      .replace("{i}", i)
                      .replace("{PLCP_i}", PLCP[i].toString());
      cs["lineNo"] = 5;
      stateList.push(cs);
    }

    for (i = 0; i < n; i++) {
      coord_data[i+1][5] = PLCP[SA[i]];
      cs = createState();
      colorNode(cs, i+1, 5);
      colorNode(cs, SA[i]+1, 3);
      cs["status"] = 'Updating LCP[{i}] = {PLCP_SA_i}'
                      .replace("{i}", i)
                      .replace("{PLCP_SA_i}", PLCP[SA[i]]);
      cs["lineNo"] = 6;
      stateList.push(cs);
    }

    cs = createState();
    cs["status"] = 'Finish'
    stateList.push(cs);   

    graphWidget.startAnimation(stateList);
    return true; 
  }

  this.goLRS = function() {
    populatePseudocode(3);
    var T = document.getElementById("T").value;
    this.constructSA_bad(T);

    var cs = createState();
    var stateList = new Array();
    cs["status"] = 'Simple O(<b>n</b>) check over the LCP column (skip row 0)<br>ans = 0, current best suffix(es) will be colored green';
    cs["lineNo"] = 1;
    stateList.push(cs);

    var max = 0, save = new Array();
    for (var i = 1; i < Object.size(LCP); i++) {
      var cs = createState();
      colorRow(cs, i+1);
      //cs["status"] = "Checking LCP[" + i + "] = " + LCP[i];
      cs["lineNo"] = 2;
      for (var j = 0; j < Object.size(save); j++)
        colorResultRow(cs, save[j]+1);
      stateList.push(cs);

      cs = createState();
      if (LCP[i] == 0) {
        //cs["status"] = "LCP[" + i + "] = " + LCP[i] + " (zero will not beat the max = " + max + ")<br>Just continue";
        cs["status"] = 'LCP[{i}] = {LCP_i} (zero does not beat the max = {max})<br>Just continue'
                        .replace('{i}', i)
                        .replace('{LCP_i}', LCP[i])
                        .replace('{max}', max);
        cs["lineNo"] = 3;

      } else if (LCP[i] > max) {
        //cs["status"] = "LCP[" + i + "] = " + LCP[i] + " is bigger than max = " + max + "<br>Update max = " + LCP[i] + " and set result array to only has this suffix";
        cs["status"] = 'LCP[{i}] = {LCP_i} is bigger than max = {max}<br>Update max = {LCP_i} and set result array to only has this suffix'
                        .replace('{i}', i)
                        .replace('{LCP_i}', LCP[i])
                        .replace('{max}', max)
                        .replace('{LCP_i}', LCP[i]);
        max = LCP[i];
        save = new Array();
        save.push(i);
        cs["lineNo"] = [3, 4];

      } else if (LCP[i] == max) {
        //cs["status"] = "LCP[" + i + "] = " + LCP[i] + " is equal to max = " + max + "<br>Keep max but add this suffix to result array";
        cs["status"] = 'LCP[{i}] = {LCP_i} is equal to max = {max}<br>Keep max but add this suffix to result array'
                        .replace('{i}', i)
                        .replace('{LCP_i}', LCP[i])
                        .replace('{max}', max);
        save.push(i);
        cs["lineNo"] = [3, 4];

      } else {
        cs["status"] = 'LCP[{i}] = {LCP[i]} is smaller than max = {max}<br>Just continue'
                        .replace('{i}', i)
                        .replace('{LCP_i}', LCP[i])
                        .replace('{max}', max);
        cs["lineNo"] = 3;
        colorRow(cs, i+1);
      }
      for (var j = 0; j < Object.size(save); j++)
        colorResultRow(cs, save[j]+1);
      stateList.push(cs);
    }

    cs = createState();
    cs["lineNo"] = 5;
    if (max > 0) {
      var ans = T.substring(SA[save[0]], SA[save[0]]+LCP[save[0]]);
      //cs["status"] = "The Longest Repeated Substring of '{T}'<br>is '{ans}' (length {LCP[save[0]]}), the prefix of the green-colored rows";
      cs["status"] = 'The Longest Repeated Substring of "{T}"<br>is "{ans}" (length {length}), the prefix of the green-colored rows'
                      .replace('{T}', T)
                      .replace('{ans}', ans)
                      .replace('{length}', LCP[save[0]]);
      for (var j = 0; j < Object.size(save); j++)
        colorResultRow(cs, save[j]+1);
    }
    else
      cs["status"] = 'The Longest Repeated Substring of "{T}"<br>is "<i>null string</i>" (length 0) as there is no repeated character at all'.replace('{T}', T);
    stateList.push(cs);

    graphWidget.startAnimation(stateList);
    return true;
  }

  this.goLCS = function() {
    var owner = new Array();
    populatePseudocode(4);
    var s1 = document.getElementById("s1").value, s2 = document.getElementById("s2").value;
    var T = s1+s2;
    this.constructSA_bad(T);
    owner.push("Owner");
    for (var i = 0; i < Object.size(SA); i++) {
      var tmp = T.substring(SA[i]);
      if (tmp.indexOf("#") == -1)
        owner.push(2);
      else
        owner.push(1);
    }
    addColumn(owner);
    owner = owner.splice(1);

    var cs = createState();
    var stateList = new Array();
    var max = 0;
    var save = new Array();
    cs["status"] = 'Simple O(<b>n</b>) check over the LCP+owner column (skip row 0)<br>ans = 0, current best suffix(es) will be colored green';
    cs["lineNo"] = 1;
    stateList.push(cs);

    cs = createState();
    cs["status"] = 'Start at index 1';
    cs["lineNo"] = 2; 
    colorRow(cs, 2);
    stateList.push(cs);

    for (var i = 1; i < Object.size(SA); i++) {
      cs = createState();
      colorRow(cs, i+1);
      if (owner[i] == owner[i-1]) {
        cs["status"] = 'Same owner as previous index<br>Continue';
        cs["lineNo"] = 3;
      }
      else {
        cs["status"] = 'Different owner as previous index ';
        cs["lineNo"] = 4;
        if (LCP[i] > max) {
          max = LCP[i];
          //cs["status"] += "LCP[i]=" + LCP[i] + " max=" + max + "<br>Update max";
          cs["status"] += 'LCP[i]={LCP_i} max={max}<br>Update max'
                            .replace('{LCP_i}', LCP[i])
                            .replace('{max}', max);
          save = new Array();
          save.push(i);
        } else if (LCP[i] == max) {
          save.push(i);
          cs["status"] += 'LCP[i]={LCP_i} max={max}<br>Update result'
                            .replace('{LCP_i}', LCP[i])
                            .replace('{max}', max);
        } else
          cs["status"] += 'LCP[i]={LCP_i} max={max}<br>Continue'
                            .replace('{LCP_i}', LCP[i])
                            .replace('{max}', max);
      }
      for (var j = 0; j < Object.size(save); j++)
        colorResultRow(cs, save[j]+1);
      stateList.push(cs);
    }

    cs = createState();
    cs["status"] = 'Finish';
    cs["lineNo"] = 5;
    for (var j = 0; j < Object.size(save); j++)
      colorResultRow(cs, save[j]+1);
    stateList.push(cs);

    graphWidget.startAnimation(stateList);
    return true;
  }

  // Javascript addon: get size of an object
  Object.size = function(obj) {
    var size = 0, key;
    for (key in obj)
      if (obj.hasOwnProperty(key))
        size++;
    return size;
  };

  function populatePseudocode(act) {
    switch (act) {
      case 0: // constructSA
        $("#code1").html('for (k = 1; k < n; k <<= 1) // O(log <b>n</b>)');
        $("#code2").html('&nbsp;&nbsp;sort based on ranking pair // O(<b>n</b>)');
        $("#code3").html('&nbsp;&nbsp;for (i = 1; i < n; i++)');
        $("#code4").html('&nbsp;&nbsp;&nbsp;&nbsp;if ranking pair is different');
        $("#code5").html('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increase rank');
        $("#code6").html('&nbsp;&nbsp;updating RA[] from tempRA[]');
        $("#code7").html('finish');
        break;
      case 1: // Search
        $("#code1").html('find lower bound // O(<b>m</b> log <b>n</b>)');
        $("#code2").html('find upper bound // O(<b>m</b> log <b>n</b>)');
        $("#code3").html('report results');
        $("#code4").html('');
        $("#code5").html('');
        $("#code6").html('');
        $("#code7").html('');
        break;
      case 2: // LCP
        $("#code1").html('for (i = 1; i < n; i++) Phi[SA[i]] = SA[i-1]');
        $("#code2").html('for (i = L = 0; i < n; i++)');
        $("#code3").html('&nbsp;&nbsp;if (Phi[i] == -1) PLCP[i] = 0, continue');
        $("#code4").html('&nbsp;&nbsp;increase L properly');
        $("#code5").html('&nbsp;&nbsp;L = max(L - 1, 0)');
        $("#code6").html('for (i = 0; i < n; i++) LCP[i] = PLCP[SA[i]]');
        $("#code7").html('// Overall O(<b>n</b>) via PLCP theorem');
        break;
      case 3: // LRS
        $("#code1").html('max = 0, result = null');
        $("#code2").html('for i = 1 to n-1');
        $("#code3").html('&nbsp;&nbsp;if (LCP[i] >= max)');
        $("#code4").html('&nbsp;&nbsp;&nbsp;&nbsp;update max and result');
        $("#code5").html('return result');
        $("#code6").html('// LRS length is unique');
        $("#code7").html('// But LRS substring(s) may not be unique');
        break;
      case 4: // LCS
        $("#code1").html('max = 0, result = null');
        $("#code2").html('for i = 1 to n-1');
        $("#code3").html('&nbsp;&nbsp;if (owner[i] == owner[i-1] continue');
        $("#code4").html('&nbsp;&nbsp;if (LCP[i] >= max) update max, result');
        $("#code5").html('return result');
        $("#code6").html('// LCS length is unique');
        $("#code7").html('// But LCS substring may not be unique');
        break;
    } 
  }
}

// Suffix Array action
var actionsWidth = 180;
var statusCodetraceWidth = 370;

var isConstructOpen = false;
var isSearchOpen = false;
var isLCPOpen = false;
var isLRSOpen = false;
var isLCSOpen = false;

function openConstruct() {
  if (!isConstructOpen) {
    $('.construct').fadeIn('fast');
    isConstructOpen = true;
  }
}

function closeConstruct() {
  if (isConstructOpen) {
    $('.construct').fadeOut('fast');
    $('#construct-err').html(""); 
    isConstructOpen = false;
  }
}

function openSearch() {
  if (!isSearchOpen) {
    $('.search').fadeIn('fast');
    isSearchOpen = true;
  }
}

function closeSearch() {
  if (isSearchOpen) {
    $('.search').fadeOut('fast');
    $('#search-err').html("");
    isSearchOpen = false;
  }
}

function openLCP() {
  if (!isLCPOpen) {
    $('.lcp').fadeIn('fast');
    isLCPOpen = true;
  }
}

function closeLCP() {
  if (isLCPOpen) {
    $('.lcp').fadeOut('fast');
    $('#lcp-err').html(""); 
    isLCPOpen = false;
  }
}

function openLRS() {
  if (!isLRSOpen) {
    $('.lrs').fadeIn('fast');
    isLRSOpen = true;
  }
}

function closeLRS() {
  if (isLRSOpen) {
    $('.lrs').fadeOut('fast');
    $('#lrs-err').html(""); 
    isLRSOpen = false;
  }
}

function openLCS() {
  if (!isLCSOpen) {
    $('.lcs').fadeIn('fast');
    isLCSOpen = true;
  }
}

function closeLCS() {
  if (isLCSOpen) {
    $('.lcs').fadeOut('fast');
    $('#lcs-err').html(""); 
    isLCSOpen = false;
  }
}

function hideEntireActionsPanel() {
  closeConstruct();
  closeSearch();
  closeLCP();
  closeLRS();
  closeLCS();
  hideActionsPanel();
}



// local
//start by showing actions panel
$('#play').hide();
var saWidget = new SuffixArrayWidget();
var gw = saWidget.getGraphWidget();
saWidget.constructSA_bad($("#T").val());

$(function() {
  $('#construct').click(function() {
    openConstruct();
    closeSearch();
    closeLCP();
    closeLRS();
    closeLCS();
  }); 

  $('#search').click(function() {
    closeConstruct();
    openSearch();
    closeLCP();
    closeLRS();
    closeLCS();
  });

  $("#LCP").click(function() {
    closeConstruct();
    closeSearch();
    closeLCP();
    closeLRS();
    closeLCS();
  });

  $("#LRS").click(function() {
    closeConstruct();
    closeSearch();
    closeLCP();
    openLRS();
    closeLCS();
  });
  
  $("#LCS").click(function() {
    closeConstruct();
    closeSearch();
    closeLCP();
    closeLRS();
    openLCS();
  });
});

function constructSuffixArray() {
  try {
    if (isPlaying) { stop(); }
  } 
  catch (err) {}
  setTimeout(function() {
    if ((mode == "exploration") && saWidget.constructSA($("#T").val())) {
      $('#current-action').show();
      var T = $("#T").val();
      $('#current-action p').html('Construct Suffix Array of<br>T = "{T}"'.replace('{T}', T));
      $('#progress-bar').slider("option", "max", gw.getTotalIteration()-1);
      triggerRightPanels();
      isPlaying = true;
    }
  }, 500); 
}

function doSearch() {
  try {
    if (isPlaying) { stop(); }
  }
  catch(err) {}
  setTimeout(function() {
    if ((mode == "exploration") && saWidget.goSearch()) {
      $('#current-action').show();
      var input = $('#search_inp').val();
      var T = $("#T").val();
      $('#current-action p').html('Search P = "{input}"<br>in T = "{T}"'.replace('{input}', input).replace('{T}', T));
      $('#progress-bar').slider("option", "max", gw.getTotalIteration()-1);
      triggerRightPanels();
      isPlaying = true;
    }
  }, 500);   
}

function doLCP() {
  try {
    if (isPlaying) { stop(); }
  } catch(err) {}
  setTimeout(function() {
    if ((mode == "exploration") && saWidget.goLCP()) {
      $('#current-action').show();
      $('#current-action p').html('Longest Common Prefix');
      $('#progress-bar').slider("option", "max", gw.getTotalIteration()-1);
      triggerRightPanels();
      isPlaying = true;
    }
  }, 500);      
}

function doLRS() {
  try {
    if (isPlaying) { stop(); }
  } catch(err) {}
  setTimeout( function() {
    if ((mode == "exploration") && saWidget.goLRS()) {
      $('#current-action').show();
      var T = $("#T").val()
      $('#current-action p').html('Longest Repeated Substring of T = "{T}"'.replace('{T}', T));
      $('#progress-bar').slider("option", "max", gw.getTotalIteration()-1);
      triggerRightPanels();
      isPlaying = true;
    }
  }, 500);      
}

function doLCS() {
  try {
    if (isPlaying) { stop(); }
  } catch(err) {}
  setTimeout(function() {
    if ((mode == "exploration") && saWidget.goLCS()) {
      $('#current-action').show();
      var s1 = $("#s1").val();
      var s2 = $("#s2").val();
      $('#current-action p').html('Longest Common Substring of T1 = "{s1}" and T2 = "{s2}"'.replace('{s1}', s1).replace('{s2}', s2));
      $('#progress-bar').slider("option", "max", gw.getTotalIteration()-1);
      triggerRightPanels();
      isPlaying = true;
    }
  }, 500);      
}
</script>
</body>

<!-- Mirrored from visualgo.net/vi/suffixarray by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 26 Nov 2020 06:40:37 GMT -->
</html>
