<!DOCTYPE html>
<html lang="vi">

<!-- Mirrored from visualgo.net/vi/mst by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 26 Nov 2020 06:40:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8">
<meta name="description" content="A Spanning Tree (ST) of a connected undirected weighted graph G is a subgraph of G that is a tree and connects (spans) all vertices of G. A graph G can have multiple STs, each with different total weight (the sum of edge weights in the ST).A Min(imum) Spanning Tree (MST) of G is an ST of G that has the smallest total weight among the various STs.">
<meta name="keywords" content="Minimum Spanning Tree MST Jarnik Prim Priority Queue Kruskal Sorting Union Find Disjoint Sets">
 
<meta name="csrf-token" content="iVivZ7KRPe6XK7pbuGtOoEjljE1xyBVNhLKNFuF8">
<meta http-equiv="X-UA-Compatible" content="IE=EDGE">
<meta property="og:image" content="../img/png/mst.png">
<title>VisuAlgo - Cây khung nhỏ nhất (Prim, Kruskal)</title>
<link rel="icon" href="../img/favicon.png" type="image/x-icon">
<link rel="shortcut icon" href="../img/favicon.png" type="image/x-icon">
<link rel="apple-touch-icon" href="../img/favicon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/favicon.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/favicon.png">
<link rel="stylesheet" type="text/css" href="../fonts/silkscreen/stylesheet.css">
<link rel="stylesheet" type="text/css" href="../css/common.css">
<link rel="stylesheet" href="../css/viz-1.0.1.css">
<link rel="stylesheet" href="../css/visual.css">
<link rel="stylesheet" href="../css/drawgraph.css">
<style>
      #e-lecture {
        top: 45px;
        right: 130px;
        width: 400px;
        display: block;
        background: none;
        /*overflow: normal;*/
        white-space: normal;
        text-align: right;
        color: black; font-weight: bold; font-size: 20px;
      }
      .electure-prev, .electure-next { /* force update, copied from viz.css */
        position: absolute;
        /* bottom: -12px; */
        top: -20px;
        /*bottom: '';*/
        padding: 3px 8px;
        background: #999;
        color: white;
        cursor: pointer;
        border-radius: 2px;
      }
      .electure-prev {
        left: -10px;
        /* right: 30px; */
      }
      .electure-next {
        right: -10px;
        color: white;
      }
    </style>
<style>
.execAction { padding: 5px 8px; }
.err { padding: 5px 0px; }
#actions-extras input {
  width: 35px;
  padding: 5px 8px 7px;
}

.draw { bottom: 173px; }
.random { bottom: 146px; }
.examples { bottom: 119px; }
.kruskals { bottom: 92px; }
.prims { bottom: 65px; }
</style>
<script>
      function changeURL() {
        var URL = window.location.href.split('https://visualgo.net/');
        var val = document.getElementById("Language").value;
        URL[3] = val;
        window.location.assign(URL.join('https://visualgo.net/'));
      }
    </script>
</head>
<body>
<div id="top-bar">
<a href="http://www.comp.nus.edu.sg/~stevenha"><span class="colour" style="border: 1px solid green; border-radius: 25px;">7</span></a>&nbsp;&nbsp;&nbsp;
<a id="home" href="https://visualgo.net/">Visu<span class="colour">Algo</span><span style="font-size: 40%">.net</span></a>
/
<select id="Language" onchange="changeURL()">
<option value="en">en</option>
<option value="zh">zh</option>
<option value="es">es</option>
<option value="pt">pt</option>
<option value="ru">ru</option>
<option value="id">id</option>
<option value="de">de</option>
<option value="bn">bn</option>
<option value="ja">ja</option>
<option value="ko">ko</option>
<option value="vi" selected>vi</option>

</select>
/mst
<span class="right-links" id="useraccount">Login</span>
<span id="title">
<a id='title-mst' class='selected-viz'>Cây khung nhỏ nhất</a>
</span>
<div id="mode-menu">
<div id='mode-button' title='exploration'>Chế độ thăm dò &#9663;</div>
<div id='other-modes'>
<a title='e-Lecture'>Chế độ Bài giảng trực tuyến</a>
</div>
</div>
</div>
<div id="dark-overlay"></div>
<div id="status" class="panel"><p></p></div>
<div id="status-hide" class="panel-hide"><img src="../img/arrow_white_right.png" alt=">" title="show/hide status panel" /></div>
<div id="codetrace" class="panel">
<p id="code1" style="padding-top: 10px;"></p>
<p id="code2"></p>
<p id="code3"></p>
<p id="code4"></p>
<p id="code5"></p>
<p id="code6"></p>
<p id="code7" style="padding-bottom: 10px;"></p>
</div>
<div id="codetrace-hide" class="panel-hide"><img src="../img/arrow_white_right.png" alt=">" title="show/hide codetrace panel" /></div>
<div id="left-bar"></div>
<div id="right-bar"></div>
<div id="media-controls">
<div id='speed-control'>Chậm<div id='speed-input'></div>Nhanh<br></div>
<span id="go-to-beginning" class="media-control-button" title="go to beginning" onclick=goToBeginning()><img src="../img/goToBeginning.png" alt="go to beginning"></span>
<span id="previous" class="media-control-button" title="step backward" onclick=stepBackward()><img src="../img/prevFrame.png" alt="previous frame"></span>
<span id="pause" class="media-control-button" title="pause" onclick=pause()><img src="../img/pause.png" alt="pause"></span>
<span id="play" class="media-control-button" title="play" onclick=play()><img src="../img/play.png" alt="play"></span>
<span id="next" class="media-control-button" title="step forward" onclick=stepForward()><img src="../img/nextFrame.png" alt="next frame"></span>
<span id="go-to-end" class="media-control-button" title="go to end" onclick=goToEnd()><img src="../img/goToEnd.png" alt="go to end"></span>
<div id="progress-bar" class="media-control-button"></div>
</div>
<div id='viz'></div>
<div id='current-action' class='panel'></div>
<div id='e-lecture' class='panel'></div>
<div id="overlay" hidden></div>
<div id="dropdown-temp-holder" hidden></div>
<div id="electure-1" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>A <strong>Spanning Tree (ST)</strong> of a connected undirected weighted graph <b>G</b> is a subgraph of <b>G</b> that is a <strong>tree</strong> and <strong>connects (spans) all vertices of <b>G</b></strong>. A graph <b>G</b> can have multiple STs, each with different total weight (the sum of edge weights in the ST).</p><br><p>A <strong>Min(imum) Spanning Tree (MST)</strong> of <b>G</b> is an ST of <b>G</b> that has the <strong>smallest total weight</strong> among the various STs.</p>
<hr>
<p><b>Remarks</b>: By default, we show e-Lecture Mode for first time (or non logged-in) visitor.<br>
Please <a href="https://visualgo.net/login"><u>login</u></a> if you are a repeated visitor or <a href="https://visualgo.net/login"><u>register</u></a> for an (optional) free account first.</p>
<div id='electure-dropdown'>
<select class="lecture-dropdown" style="width:100%">
<option value="1">1. Min(imum) Spanning Tree (MST)</option>
<option value="1-1">&nbsp;&nbsp;&nbsp;1-1. MST Problem</option>
<option value="1-2">&nbsp;&nbsp;&nbsp;1-2. Motivating Example</option>
<option value="1-3">&nbsp;&nbsp;&nbsp;1-3. MST Algorithms</option>
<option value="2">2. Visualisation </option>
<option value="3">3. Input Graph</option>
<option value="4">4. Kruskal&#39;s Algorithm</option>
<option value="4-1">&nbsp;&nbsp;&nbsp;4-1. The Basic Idea</option>
<option value="4-2">&nbsp;&nbsp;&nbsp;4-2. The Answer</option>
<option value="4-3">&nbsp;&nbsp;&nbsp;4-3. The Basic Idea - Continued</option>
<option value="4-4">&nbsp;&nbsp;&nbsp;4-4. Short Proof of Correctness - 1</option>
<option value="4-5">&nbsp;&nbsp;&nbsp;4-5. Short Proof of Correctness - 2</option>
<option value="4-6">&nbsp;&nbsp;&nbsp;4-6. Short Proof of Correctness - 3</option>
<option value="4-7">&nbsp;&nbsp;&nbsp;4-7. Implementation Sketch</option>
<option value="5">5. Prim&#39;s Algorithm</option>
<option value="5-1">&nbsp;&nbsp;&nbsp;5-1. The Basic Idea</option>
<option value="5-2">&nbsp;&nbsp;&nbsp;5-2. Short Proof of Correctness - Part 1</option>
<option value="5-3">&nbsp;&nbsp;&nbsp;5-3. If T != T*, Part 1</option>
<option value="5-4">&nbsp;&nbsp;&nbsp;5-4. If T != T*, Part 2</option>
<option value="5-5">&nbsp;&nbsp;&nbsp;5-5. Short Proof of Correctness - Part 2</option>
<option value="5-6">&nbsp;&nbsp;&nbsp;5-6. Implementation Sketch</option>
<option value="6">6. Poll</option>
<option value="6-1">&nbsp;&nbsp;&nbsp;6-1. The Answer</option>
<option value="7">7. Extras</option>
<option value="7-1">&nbsp;&nbsp;&nbsp;7-1. MST Problem Variants</option>
<option value="7-2">&nbsp;&nbsp;&nbsp;7-2. Online Quiz</option>
<option value="7-3">&nbsp;&nbsp;&nbsp;7-3. Online Judge Exercises</option>
<option value="7-4">&nbsp;&nbsp;&nbsp;7-4. Discussion</option>
<option value="99">99. Status Panel</option>
<option value="99-1">&nbsp;&nbsp;&nbsp;99-1. Codetrace Panel</option>
<option value="99-2">&nbsp;&nbsp;&nbsp;99-2. Media Control</option>
<option value="99-3">&nbsp;&nbsp;&nbsp;99-3. Return to &#39;Exploration Mode&#39;</option>
</select>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-next' data-nextid="1-1">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-1-1" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>The <b>MST</b> problem is a standard graph (and also optimization) problem defined as follows: Given a connected undirected weighted graph <b>G = (V, E)</b>, select a <b>subset</b> of edges of <b>G</b> such that the graph is still connected but with minimum total weight. The output is either the actual MST of <b>G</b> (there can be several possible MSTs of <b>G</b>) or usually just the minimum total weight itself (unique).</p>
<hr>
<p>Pro-tip: Since you are not <a href="https://visualgo.net/login"><u>logged-in</u></a>, you may be a first time visitor who are not aware of the following keyboard shortcuts to navigate this e-Lecture mode: <b>[PageDown]</b> to advance to the next slide, <b>[PageUp]</b> to go back to the previous slide, <b>[Esc]</b> to toggle between this e-Lecture mode and exploration mode.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="1">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="1-2">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-1-2" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>Imagine that you work for a government who wants to link all rural villages in the country with roads.<br>(that is <i>spanning tree</i>).</p><br><p>The cost to build a road to connect two villages depends on the terrain, distance, etc.<br>(that is a <i>complete undirected weighted graph</i>).</p><br><p>You want to minimize the total building cost. How are you going to build the roads?<br>(that is <i>minimum spanning tree</i>).</p>
<hr>
<p>Another pro-tip: We designed this visualization and this e-Lecture mode to look good on 1366x768 resolution <b>or larger</b> (typical modern laptop resolution in 2017). We recommend using Google Chrome to access VisuAlgo. Go to full screen mode (<b>F11</b>) to enjoy this setup. However, you can use zoom-in (<b>Ctrl +</b>) or zoom-out (<b>Ctrl -</b>) to calibrate this.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="1-1">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="1-3">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-1-3" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>The <b>MST</b> problem has polynomial solutions.</p><br><p>In this visualization, we will learn two of them: Kruskal&#39;s algorithm and Prim&#39;s algorithm. Both are classified as <b>Greedy</b> Algorithms.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="1-2">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="2">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-2" class="electure-dialog" style="top:100px;right:70px;width:300px;">
<p>View the visualisation of MST algorithm on the left.</p><br><p>Originally, all vertices and edges in the input graph are colored with the standard <span style="background-color: white; color: black">black color on white background</span>.</p><br><p>At the end of the MST algorithm, MST edges (and all vertices) will be colored <span style="color: orange;">orange</span> and Non-MST edges will be colored <span style="color: grey;">grey</span>.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="1-3">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="3">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-3" class="electure-dialog" style="bottom:200px;left:60px;width:500px;">
<p>There are two different sources for specifying an input graph:</p><ol><li><b>Draw Graph</b>: You can draw <strong>any</strong> connected undirected weighted graph as the input graph.</li><li><b>Example Graphs</b>: You can select from the list of example connected undirected weighted graphs to get you started.</li></ol>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="2">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="4">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-4" class="electure-dialog" style="top:100px;right:70px;width:500px;">
<p><b>Kruskal&#39;s algorithm</b>: An O(<b>E</b> log <b>V</b>) greedy MST algorithm that grows a forest of minimum spanning trees and eventually combine them into one MST.</p><br><p>Kruskal&#39;s requires <a href="sorting.html"><u>a good sorting algorithm</u></a> to sort edges of the input graph by increasing weight and another data structure called <a href="ufds.html"><u>Union-Find Disjoint Sets (UFDS)</u></a> to help in checking/preventing cycle.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="3">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="4-1">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-4-1" class="electure-dialog" style="top:100px;right:70px;width:500px;">
<p>Kruskal&#39;s algorithm first sort the set of edges <b>E</b> in non-decreasing weight (there can be edges with the same weight), and if ties, by increasing smaller vertex number of the edge, and if still ties, by increasing larger vertex number of the edge.</p><br><p>Discussion: Is this the only possible sort criteria?</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="4">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="4-2">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-4-2" class="electure-dialog" style="top:100px;right:70px;width:500px;">
<div style="background-color: white; color: black;">
<p>e-Lecture: The content of this slide is hidden and only available for legitimate CS lecturer worldwide. Drop an email to visualgo.info at gmail dot com if you want to activate this CS lecturer-only feature <b>and you are really a CS lecturer (show your University staff profile)</b>.</p>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="4-1">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="4-3">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-4-3" class="electure-dialog" style="top:100px;right:70px;width:500px;">
<p>Then, Kruskal&#39;s algorithm will perform a loop through these sorted edges (that already have non-decreasing weight property) and <b>greedily</b> taking the next edge <b>e</b> if it does <b>not</b> create any cycle w.r.t edges that have been taken earlier.</p><br><p>Without further ado, let&#39;s try <span class="slide-actions" onclick="doButtonAction30()">Kruskal</span> on the default example graph (that has three edges with the same weight). Go through this animated example first before continuing.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="4-2">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="4-4">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-4-4" class="electure-dialog" style="top:100px;right:70px;width:500px;">
<p>To see on why the <b>Greedy Strategy</b> of Kruskal&#39;s algorithm works, we define a <b>loop invariant</b>: Every edge <b>e</b> that is added into tree <b>T</b> by Kruskal&#39;s algorithm is part of the <b>MST</b>.</p><br><p>At the start of Kruskal&#39;s main loop, <b>T = {}</b> is always part of <b>MST</b> by definition.</p><br><p>Kruskal&#39;s has a special cycle check in its main loop (using <a href="ufds.html"><u>UFDS</u></a> data structure) and only add an edge <b>e</b> into <b>T</b> if it will never form a cycle w.r.t the previously selected edges.</p><br><p>At the end of the main loop, Kruskal&#39;s can only select <b>V</b>-1 edges from a connected undirected weighted graph <b>G</b> without having any cycle. This implies that Kruskal&#39;s produces a Spanning Tree.</p><br><p>On the default example, notice that after taking the first 2 edges: 0-1 and 0-3, in that order, Kruskal&#39;s <b>cannot</b> take edge 1-3 as it will cause a cycle 0-1-3-0. Kruskal&#39;s then take edge 0-2 but it cannot take edge 2-3 as it will cause cycle 0-2-3-0.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="4-3">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="4-5">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-4-5" class="electure-dialog" style="top:100px;right:70px;width:500px;">
<p>We have seen in the previous slide that Kruskal&#39;s algorithm will produce a tree <b>T</b> that is a Spanning Tree (ST) when it stops. But is it the minimum ST, i.e. the <b>MST</b>?</p><br><p>To prove this, we need to recall that <b>before</b> running Kruskal&#39;s main loop, we have already sort the edges in non-decreasing weight, i.e. the latter edges will have equal or <b>larger</b> weight than the earlier edges.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="4-4">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="4-6">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-4-6" class="electure-dialog" style="top:100px;right:70px;width:500px;">
<p>At the start of every loop, <b>T</b> is always part of MST.</p><br><p>If Kruskal&#39;s only add a legal edge <b>e</b> (that will not cause cycle w.r.t the edges that have been taken earlier) with <b>min cost</b>, then we can be sure that <b>w(T U e) &le; w(T U any other unprocessed edge e&#39; that does not form cycle)</b> (by virtue that Kruskal&#39;s has sorted the edges, so <b>w(e) &leq; w(e&#39;)</b>.</p><br><p>Therefore, at the end of the loop, the Spanning Tree <b>T</b> must have minimal overall weight <b>w(T)</b>, so <b>T</b> is the final MST.</p><br><p>On the default example, notice that after taking the first 2 edges: 0-1 and 0-3, in that order, and ignoring edge 1-3 as it will cause a cycle 0-1-3-0. We can safely take the next smallest legal edge 0-2 (with weight 2) as taking any other legal edge (e.g. edge 2-3 with <b>larger</b> weight 3) will either create <b>another</b> MST with equal weight (not in this example) or <b>another</b> ST that is not minimum (which is this example).</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="4-5">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="4-7">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-4-7" class="electure-dialog" style="top:100px;right:70px;width:500px;">
<p>There are two parts of Kruskal&#39;s algorithm: Sorting and the Kruskal&#39;s main loop.</p><br><p>The sorting of edges is easy. We just store the graph using <b>Edge List</b> <a href="graphds.html"><u>data structure</u></a> and sort <b>E</b> edges using any O(<b>E</b> log <b>E</b>) = O(<b>E</b> log <b>V</b>) <a href="sorting.html"><u>sorting algorithm</u></a> (or just use C++/Java sorting library routine) by increasing weight, smaller vertex number, higher vertex number. This O(<b>E</b> log <b>V</b>) is the bottleneck part of Kruskal&#39;s algorithm as the second part is actually lighter, see below.</p><br><p>Kruskal&#39;s main loop can be easily implemented using <a href="ufds.html"><u>Union-Find Disjoint Sets</u></a> data structure. We use <b>IsSameSet(u, v)</b> to test if taking edge <b>e</b> with endpoints <b>u</b> and <b>v</b> will cause a cycle (same connected component) or not. If <b>IsSameSet(u, v)</b> returns false, we greedily take this next smallest and legal edge <b>e</b> and call <b>UnionSet(u, v)</b> to prevent future cycles involving this edge. This part runs in O(<b>E</b>) as we assume UFDS <b>IsSameSet(u, v)</b> and <b>UnionSet(u, v)</b> operations run in O(<b>1</b>) for a relatively small graph.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="4-6">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="5">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-5" class="electure-dialog" style="top:100px;right:70px;width:500px;">
<p><b>Prim&#39;s algorithm</b>: Another O(<b>E</b> log <b>V</b>) greedy MST algorithm that grows a Minimum Spanning Tree from a starting source vertex until it spans the entire graph.</p><br><p>Prim&#39;s requires a Priority Queue data structure (usually implemented using <a href="heap.html"><u>Binary Heap</u></a>) to dynamically order the currently considered edges based on increasing weight, an <a href="graphds.html"><u>Adjacency List data structure</u></a> for fast neighbor enumeration of a vertex, and a Boolean array to help in checking cycle.</p><br><p>Another name of Prim&#39;s algorithm is Jarnik-Prim&#39;s algorithm.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="4-7">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="5-1">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-5-1" class="electure-dialog" style="top:100px;right:70px;width:500px;">
<p>Prim&#39;s algorithm starts from a designated source vertex <b>s</b> and enqueues all edges incident to <b>s</b> into a Priority Queue (PQ) according to increasing weight, and if ties, by increasing vertex number (of the neighboring vertex number). Then it will repeatedly do the following greedy steps: If the vertex <b>v</b> of the front-most edge pair information <b>e: (w, v)</b> in the PQ has <b>not</b> been visited, it means that we can greedily extends the tree <b>T</b> to include vertex <b>v</b> and enqueue edges connected to <b>v</b> into the PQ, otherwise we discard edge <b>e</b>.</p><br><p>Without further ado, let&#39;s try <span class="slide-actions" onclick="doButtonAction31()">Prim(1)</span> on the default example graph (that has three edges with the same weight). That&#39;s it, we start Prim&#39;s algorithm from source vertex <b>s = 1</b>. Go through this animated example first before continuing.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="5">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="5-2">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-5-2" class="electure-dialog" style="top:100px;right:70px;width:500px;">
<p>Prim&#39;s algorithm is a <b>Greedy Algorithm</b> because at each step of its main loop, it always try to select the next valid edge <b>e</b> with minimal weight (that is greedy!).</p><br><p>The convince us that Prim&#39;s algorithm is correct, let&#39;s go through the following simple proof: Let <b>T</b> be the spanning tree of graph <b>G</b> generated by Prim&#39;s algorithm and <b>T*</b> be the spanning tree of <b>G</b> that is known to have minimal cost, i.e. <b>T*</b> is the <b>MST</b>.</p><br><p>If <b>T == T*</b>, that&#39;s it, Prim&#39;s algorithm produces exactly the same <b>MST</b> as <b>T*</b>, we are done.</p><br><p>But if <b>T != T*</b>...</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="5-1">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="5-3">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-5-3" class="electure-dialog" style="top:100px;right:70px;width:500px;">
<p>Assume that on the default example, <b>T = {0-1, 0-3, 0-2}</b> but <b>T* = {0-1, 1-3, 0-2}</b> instead.</p><br><p>Let <b>e<sub>k</sub> = (u, v)</b> be the first edge chosen by Prim&#39;s Algorithm at the <b>k</b>-th iteration that is not in <b>T*</b> (on the default example, <b>k = 2</b>, <b>e<sub>2</sub> = (0, 3)</b>, note that <b>(0, 3)</b> is not in <b>T*</b>).</p><br><p>Let <b>P</b> be the path from <b>u</b> to <b>v</b> in <b>T*</b>, and let <b>e*</b> be an edge in <b>P</b> such that one endpoint is in the tree generated at the (<b>k</b>−1)-th iteration of Prim&#39;s algorithm and the other is not (on the default example, <b>P = 0-1-3</b> and <b>e* = (1, 3)</b>, note that vertex <b>1</b> is inside <b>T</b> at first iteration <b>k = 1</b>).</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="5-2">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="5-4">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-5-4" class="electure-dialog" style="top:100px;right:70px;width:500px;">
<p>If the weight of <b>e*</b> is less than the weight of <b>e<sub>k</sub></b>, then Prim&#39;s algorithm would have chosen <b>e*</b> on its <b>k</b>-th iteration as that is how Prim&#39;s algorithm works.</p><br><p>So, it is certain that <b>w(e*) &ge; w(e<sub>k</sub>)</b>.<br>(on the example graph, <b>e* = (1, 3)</b> has weight 1 and <b>e<sub>k</sub> = (0, 3)</b> also has weight 1).</p><br><p>When weight <b>e*</b> is = weight <b>e<sub>k</sub></b>, the choice between the <b>e*</b> or <b>e<sub>k</sub></b> is actually arbitrary. And whether the weight of <b>e*</b> is &ge; weight of <b>e<sub>k</sub></b>, <b>e*</b> can always be substituted with <b>e<sub>k</sub></b> while preserving minimal total weight of <b>T*</b>. (on the example graph, when we replace <b>e* = (1, 3)</b> with <b>e<sub>k</sub> = (0, 3)</b>, we manage to transform <b>T*</b> into <b>T</b>).</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="5-3">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="5-5">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-5-5" class="electure-dialog" style="top:100px;right:70px;width:500px;">
<p>But if <b>T != T*</b>... (continued)</p><br><p>We can repeat the substitution process outlined earlier repeatedly until <b>T* = T</b> and thereby we have shown that the spanning tree generated by any instance of Prim&#39;s algorithm (from any source vertex <b>s</b>) is an MST as whatever the optimal MST is, it can be transformed to the output of Prim&#39;s algorithm.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="5-4">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="5-6">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-5-6" class="electure-dialog" style="top:100px;right:70px;width:500px;">
<p>We can easily implement Prim&#39;s algorithm with two well-known data structures:</p><ol><li>A Priority Queue PQ (<a href="heap.html"><u>Binary Heap</u></a> or just use C++ STL priority_queue/Java PriorityQueue), and</li><li>A Boolean array of size <b>V</b> (to decide if a vertex has been taken or not, i.e. in the same connected component as source vertex <b>s</b> or not).</li></ol><p>With these, we can run Prim&#39;s Algorithm in O(<b>E</b> log <b>V</b>) because we process each edge once and each time, we call <b>Insert((w, v))</b> and <b>(w, v) = ExtractMax()</b> from a PQ in O(log <b>E</b>) = O(log <b>V<sup>2</sup></b>) = O(2 log <b>V</b>) = O(log <b>V</b>). As there are <b>E</b> edges, Prim&#39;s Algorithm runs in O(<b>E</b> log <b>V</b>).</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="5-5">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="6">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-6" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<input class="mcq-answer" id="mcq-answer-12" value="55" hidden><p>Quiz: <b>Having seen both Kruskal's and Prim's Algorithms, which one is the better MST algorithm?</b></p><form><input type="radio" name="mcq-12-choice" value="55"> It Depends<br><input type="radio" name="mcq-12-choice" value="54"> Kruskal's Algorithm<br><input type="radio" name="mcq-12-choice" value="53"> Prim's Algorithm<br></form><button class="mcq-submit" id="submit-12">Submit</button> <span id="answer-status-12"></span><br><br><p>Discussion: Why?</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="5-6">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="6-1">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-6-1" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<div style="background-color: white; color: black;">
<p>e-Lecture: The content of this slide is hidden and only available for legitimate CS lecturer worldwide. Drop an email to visualgo.info at gmail dot com if you want to activate this CS lecturer-only feature <b>and you are really a CS lecturer (show your University staff profile)</b>.</p>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="6">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="7">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-7" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>You have reached the end of the basic stuffs of this Min(imum) Spanning Tree graph problem and its two classic algorithms: Kruskal&#39;s and Prim&#39;s (there are others, like Boruvka&#39;s, but not discussed in this visualization). We encourage you to explore further in the <b>Exploration Mode</b>.</p><br><p>However, the harder MST problems can be (much) more challenging that its basic version.</p><br><p>Once you have (roughly) mastered this MST topic, we encourage you to study more on harder graph problems where MST is used as a component, e.g. approximation algorithm for NP-hard <a href="tsp.html" target="_blank"><u>(Metric No-Repeat) TSP</u></a> and Steiner Tree (soon) problems.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="6-1">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="7-1">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-7-1" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<div style="background-color: white; color: black;">
<p>e-Lecture: The content of this slide is hidden and only available for legitimate CS lecturer worldwide. Drop an email to visualgo.info at gmail dot com if you want to activate this CS lecturer-only feature <b>and you are really a CS lecturer (show your University staff profile)</b>.</p>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="7-2">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-7-2" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>For a few more challenging questions about this MST problem and/or Kruskal&#39;s/Prim&#39;s Algorithms, please practice on <a href="https://visualgo.net/training?diff=Medium&amp;n=7&amp;tl=0&amp;module=mst"><u>MST</u></a> training module (no login is required, but short and of medium difficulty setting only).</p><br><p>However, for registered users, you should login and then go to the <a href="https://visualgo.net/training"><u>Main Training Page</u></a> to officially clear this module (and its pre-requisites) and such achievement will be recorded in your user account.</p><hr><p>Pro-tip: To attempt MST Online Quiz in easy or medium difficulty setting without having to clear the pre-requisites first, you have to log out first (from your <a href="https://visualgo.net/profile"><u>profile</u></a> page).</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7-1">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="7-3">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-7-3" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<p>This MST problem can be much more challenging than this basic form. Therefore we encourage you to try the following two ACM ICPC contest problems about MST: <a href="https://uva.onlinejudge.org/external/12/1234.pdf" title="" target="_blank"><u>UVa 01234 - RACING</u></a> and <a href="https://open.kattis.com/problems/arcticnetwork" title="" target="_blank"><u>Kattis - arcticnetwork</u></a>.</p><br><p>Try them to consolidate and improve your understanding about this graph problem.</p><br><p>You are allowed to use/modify our implementation code for Kruskal&#39;s/Prim&#39;s Algorithms:<br><a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch4/mst/kruskal.cpp" target="_blank"><u>kruskal.cpp</u></a>/<a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch4/mst/prim.cpp" target="_blank"><u>prim.cpp</u></a><br><a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch4/mst/kruskal.java" target="_blank"><u>kruskal.java</u></a>/<a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch4/mst/prim.java" target="_blank"><u>prim.java</u></a><br><a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch4/mst/kruskal.py" target="_blank"><u>kruskal.py</u></a>/<a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch4/mst/prim.py" target="_blank"><u>prim.py</u></a><br><a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch4/mst/kruskal.ml" target="_blank"><u>kruskal.ml</u></a>/<a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch4/mst/prim.ml" target="_blank"><u>prim.ml</u></a><br></p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7-2">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="7-4">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-7-4" class="electure-dialog" style="top:60px;left:60px;width:500px;">
<div style="background-color: white; color: black;">
<p>e-Lecture: The content of this slide is hidden and only available for legitimate CS lecturer worldwide. Drop an email to visualgo.info at gmail dot com if you want to activate this CS lecturer-only feature <b>and you are really a CS lecturer (show your University staff profile)</b>.</p>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7-3">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="99">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-99" class="electure-dialog" style="right:150px;bottom:335px;width:500px;">
<p>As the action is being carried out, each step will be described in the status panel.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="7-4">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="99-1">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-99-1" class="electure-dialog" style="right:170px;bottom:275px;width:180px;">
<div style="background-color: white; color: black;">
<p>e-Lecture: The content of this slide is hidden and only available for legitimate CS lecturer worldwide. Drop an email to visualgo.info at gmail dot com if you want to activate this CS lecturer-only feature <b>and you are really a CS lecturer (show your University staff profile)</b>.</p>
</div>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="99">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="99-2">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-99-2" class="electure-dialog" style="bottom:70px;left:50%;margin-left:-120px;width:260px;">
<p>Control the animation with the player controls! Keyboard shortcuts are:<br></p><div style="margin-top: 8px;"><strong>Spacebar:</strong> play/pause/replay</div><strong>Left/right arrows:</strong> step backward/step forward<br><strong>-/+:</strong> decrease/increase speed<br>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="99-1">Trước đó <u>PgUp</u></div>
<div class='electure-next' data-nextid="99-3">Tiếp theo <u>PgDn</u></div>
</div>
<div id="electure-99-3" class="electure-dialog" style="top:70px;right:60px;width:300px;">
<p>Return to &#39;Exploration Mode&#39; to start exploring!</p><br><p>Note that if you notice any bug in this visualization or if you want to request for a new visualization feature, do not hesitate to drop an email to the project leader: Dr Steven Halim via his email address: stevenhalim at gmail dot com.</p>
<div class='electure-end'>X <u>Esc</u></div>
<div class='electure-prev' data-nextid="99-2">Trước đó <u>PgUp</u></div>
</div>
<div id="popup" hidden>
<div id="popup-content"></div>
<span id="hide-popup" hidden>X <u>Close</u></span>
</div>
<div id="actions" class="panel">
<p id="draw" onclick=drawGraph()>Vẽ đồ thị</p>
<p id="examples" class="execAction">Đồ thị ví dụ</p>
<p id="kruskals" class="execAction" onclick="kruskals()">Thuật toán Kruskal</p>
<p id="prims" class="execAction">Thuật toán Prim(s)</p>
</div>
<div id="actions-hide" class="panel-hide"><img src="../img/arrow_white_right.png" alt=">" title="Hiện/Ẩn Trung tâm Hành động" /></div>
<div id="actions-extras">
<div class="draw action-menu-pullout">
<div id="draw-err" class="err"></div>
</div>
<div class="examples action-menu-pullout">
<div id="example1" class="execAction new-menu-option coloured-menu-option" onclick="example(CP3_4_10)"><p>CP 4.10</p></div>
<div id="example2" class="execAction new-menu-option coloured-menu-option" onclick="example(CP3_4_14)"><p>CP 4.14</p></div>
<div id="example3" class="execAction new-menu-option coloured-menu-option" onclick="example(K5)"><p>K5</p></div>
<div id="example4" class="execAction new-menu-option coloured-menu-option" onclick="example(RAIL)"><p>Rail</p></div>
<div id="example5" class="execAction new-menu-option coloured-menu-option" onclick="example(TESSELLATION)"><p>Tessellation</p></div>
</div>
<div class="kruskals action-menu-pullout">
<div id="kruskals-err" class="err"></div>
</div>
<div class="prims action-menu-pullout">
<div id="prims-input" class="new-menu-option">s = <input type="number" id="prim-v" title="Nhập mã đỉnh nguồn" autocomplete="off" min=0 max=99 value=0></div>
<div id="prims-go" class="execAction coloured-menu-option" onclick=prims()><p>Go</p></div>
<div id="prims-err" class="err"></div>
</div>
</div>
<div id="drawgraph" class="overlays"></div>
<div id="bottom-bar">
<a id="trigger-about">Về</a>
<a id="trigger-team">Nhóm</a>
<a id="trigger-terms">Điều khoản sử dụng</a>
</div>
<div id="about" class="overlays">
<h4>Về</h4><span class='close-overlay'>&#x2715;</span>
<div class='content'>
VisuAlgo được lên ý tưởng vào năm 2011 bởi tiến sĩ Steven Halim như là một công cụ để giúp những sinh viên của ông ấy có thể hiểu rõ hơn về các cấu trúc dữ liệu và thuật toán, bằng cách cho phép họ tự học những nội dung cơ bản nhất với tiến độ phù hợp với riêng họ.<br>VisuAlgo chứa rất nhiều thuật toán nâng cao đã được thảo luận trong cuốn sách của Tiến sĩ Steven Halim (&#39;Competitive Programming&#39;, đồng tác giả với anh trai của ông ấy, tiến sĩ Felix Halim) và hơn thế nữa. Hiện tại, một số mô phỏng/hiệu ứng hoạt hình của các thuật toán nâng cao này chỉ có thể tìm thấy ở VisuAlgo.<div>Mặc dù được thiết kế đặc biệt cho những sinh viên đại học quốc gia Singapore (phải học rất nhiều môn học về cấu trúc dữ liệu và thuật toán - ví dụ: CS1010, CS1020, CS2010, CS2020, CS3230, and CS3230), như những người ủng hộ việc học trực tuyến, chúng tôi hi vọng rằng những người quan tâm tới cấu trúc dữ liệu và thuật toán trên toàn thế giới cũng có thể thấy những mô tả này là hữu dụng.<br>Ngay từ đầu, VisuAlgo không được thiết kế để làm việc tốt trên những màn hình cảm ứng nhỏ (ví dụ như smartphones) do việc mô phỏng các thuật toán phức tạp cần rất nhiều điểm ảnh và cử chỉ nhấp và kéo để tương tác. Độ phân giải màn ảnh nhỏ nhất cho trải nghiệm người dùng chấp nhận được là 1024x768 và chỉ có duy nhất trang đích là tương đối thân thiện với bản di động.</div><div>VisuAlgo là một dự án liên tục và nhiều mô phỏng phức tạp vẫn đang được phát triển.<br>Cải tiến thú vị nhất là tạo và duyệt câu hỏi tự động (hệ thống câu hỏi trực tuyến) cho phép sinh viên kiểm tra kiến thức cơ bản về các cấu trúc dữ liệu và thuật toán. Các câu hỏi được tạo ngẫu nhiên thông qua những quy luật và câu trả lời của sinh viên sẽ được chấm điểm tự động và ngay lập tức dựa trên việc nộp bài tới server chấm điểm của chúng tôi. Hệ thống câu hỏi trực tuyến này, khi mà nó được chấp nhận bởi nhiều giảng viên CS trên toàn thế giới, sẽ xóa bỏ mặt kĩ thuật các câu hỏi về cấu trúc dữ liệu và thuật toán cơ bản khỏi các kỳ thi khoa học máy tính điển hình tại rất nhiều trường đại học. Bằng cách đặt một tiêu chí chấm điểm nhỏ (nhưng khác 0) vào việc vượt qua các câu hỏi trực tuyến, giảng viên CS có thể làm tăng (một cách đáng kể) sự thành thạo của những sinh viên trên những câu hỏi cơ bản này khi họ một lượng vô số các câu hỏi thực tế cho sự luyện tập cái mà có thể được kiểm chứng ngay lập tức trước khi họ làm câu hỏi trực tuyến. Hiện tại, chế độ hướng dẫn bao gồm các câu hỏi cho 12 module mô phỏng. Chúng tôi sẽ sớm thêm vào 8 module mô phỏng còn lại để cho tất cả các module mô phỏng ở VisuAlgo đều có phần câu hỏi trực tuyến.<br>Một cải tiến hấp dẫn khác là việc quốc tế hóa các dự án nhánh của VisuAlgo. Chúng tôi muốn chuẩn bị cơ sở dữ liệu các thuật ngữ CS cho các văn bản tiếng Anh đã từng xuất hiện trên hệ thống VisuAlgo. Đây là một nhiệm vụ lớn và cần điện toán đám đông. Một khi hệ thống đã sẵn sàng, chúng tôi sẽ mời người dùng VisuAlgo đóng góp, đặc biệt là khi bạn không phải là người nói tiếng Anh bản ngữ. Hiện tại, chúng tôi cũng đang viết những ghi chú về VisuAlgo bằng những ngôn ngữ khác nhau.<br></div>
<a href="https://weibo.com/p/230418436e9ee80102v4rk" target='_blank'><u>zh</u></a>, <a href='https://www.facebook.com/notes/steven-halim/httpidvisualgonet-visualisasi-struktur-data-dan-algoritma-dengan-animasi/10153236934439689' target='_blank'><u>id</u></a>, <a href="https://blog.naver.com/visualgo_nus" target='_blank'><u>kr</u></a>, <a href='https://www.facebook.com/groups/163215593699283/permalink/824003417620494/' target='_blank'><u>vn</u></a>, <a href='http://pantip.com/topic/32736343' target='_blank'><u>th</u></a>.</p>
</div>
</div>
<div id="team" class="overlays">
<h4>Nhóm</h4><span class='close-overlay'>&#x2715;</span>
<div class='content'>
<p>
<strong><span style='line-height: 150%;'>Trưởng dự án và cố vấn (từ tháng 7/2011 đến nay)</span></strong><br>
<a href='http://www.comp.nus.edu.sg/~stevenha/' target='_blank'>Dr Steven Halim</a>, Senior Lecturer, School of Computing (SoC), National University of Singapore (NUS)<br>
<a href='http://felix-halim.net/' target='_blank'>Dr Felix Halim</a>, Software Engineer, Google (Mountain View)
</p>
<p>
<strong><span style='line-height: 150%;'>Những nhà nghiên cứu sinh viên 1 (Jul 2011-Apr 2012)</span></strong><br>
Koh Zi Chun, <a href='http://roticv.rantx.com/' target='_blank'>Victor Loh Bo Huai</a>
</p>
<p>
<strong><span style='line-height: 150%;'>Đồ án năm cuối/ sinh viên UROP 1 (Jul 2012-Dec 2013)</span></strong><br>
Phan Thi Quynh Trang, Peter Phandi, Albert Millardo Tjindradinata, Nguyen Hoang Duy
</p>
<p>
<strong><span style='line-height: 150%;'>Đồ án năm cuối/ sinh viên UROP 2 (Jun 2013-Apr 2014)</span></strong><br>
<a href='http://www.rosemarietan.com/' target='_blank'>Rose Marie Tan Zhao Yun</a>, Ivan Reinaldo
</p>
<p>
<strong><span style='line-height: 150%;'>Những nhà nghiên cứu sinh viên 2 (May 2014-Jul 2014)</span></strong><br>
Jonathan Irvin Gunawan, Nathan Azaria, Ian Leow Tze Wei, Nguyen Viet Dung, Nguyen Khac Tung, Steven Kester Yuwono, Cao Shengze, Mohan Jishnu
</p>
<p>
<strong><span style='line-height: 150%;'>Đồ án năm cuối/ sinh viên UROP 3 (Jun 2014-Apr 2015)</span></strong><br>
Erin Teo Yi Ling, Wang Zi
</p>
<p>
<strong><span style='line-height: 150%;'>Đồ án năm cuối/ sinh viên UROP 4 (Jun 2016-Dec 2017)</span></strong><br>
Truong Ngoc Khanh, John Kevin Tjahjadi, Gabriella Michelle, Muhammad Rais Fathin Mudzakir
</p>
<p>
List of translators who have contributed &ge;100 translations can be found at <a href="https://visualgo.net/statistics">statistics</a> page.
</p>
<p>
<strong><span style='line-height: 150%;'>Lời cảm ơn</span></strong><br>
This project is made possible by the generous <a href="http://www.cdtl.nus.edu.sg/teg/" target="_blank">Teaching Enhancement Grant</a> from NUS Centre for Development of Teaching and Learning (CDTL).
</p>
</div>
</div>
<div id="termsofuse" class="overlays">
<h4>Điều khoản sử dụng</h4><span class='close-overlay'>&#x2715;</span>
<div class='content'>
VisuAlgo miễn phí đối với cộng đồng Khoa học Máy tính trên toàn thế giới. Nếu bạn yêu thích VisuAlgo, khoản chi phí duy nhất mà chúng tôi muốn bạn chi trả chính là hãy nói cho những <b>sinh viên/ giảng viên ngành khoa học máy tính</b> mà bạn biết<b> về sự tồn tại của VisuAlgo</b> =) thông qua Facebook, Twitter, trang web về khóa học, blog review, email , v.v &amp; v.v. Nếu bạn là một<b> sinh viên/ giảng viên</b> ngành cấu trúc dữ liệu và thuật toán, bạn được phép sử dụng website này một cách trực tiếp trong các lớp học của bạn. Nếu bạn lấy những ảnh chụp màn hình (videos) từ website này, bạn có thể sử dụng chúng ở bất kỳ đâu, miễn là có dẫn nguồn URL của website này (http://visualgo.net) và/hoặc liệt kê các công bố ở dưới như là tài liệu tham khảo. Tuy nhiên, bạn <b>KHÔNG</b> được phép tải xuống các tập tin VisuAlgo (phía máy trạm) và lưu trữ nó ở website riêng của bạn vì nó được coi là <b>đạo ý tưởng</b> .Hiện tại, chúng tôi <b>KHÔNG</b> cho phép những người khác chia nhỏ dự án này và tạo ra những phiên bản khác của VisuAlgo. Việc sử dụng bản sao ngoại tuyến của VisuAlgo (phía máy trạm) cho mục đích cá nhân của bạn thì có thể chấp nhận được.<br>Lưu ý rằng hệ thống câu hỏi trực tuyến của VisuAlgo có phần dữ liệu phía máy chủ rất lớn và không dễ dàng để lưu lại mã kịch bản phía máy chủ và cơ sở dữ liệu một cách cục bộ. Hiện tại, mọi người chỉ có thể sử dụng "chế độ đào tạo" để truy cập hệ thống câu hỏi trực tuyến này. Chế độ kiểm tra hiện là môi trường có kiểm soát hơn cho việc sử dụng những câu hỏi được tạo ngẫu nhiên này và tự động kiểm duyệt cho kỳ thi <b>thật sự</b> tại Đại học Quốc gia Singapore<span style="white-space: normal;">.</span> Những giảng viên quan tâm tới khoa học máy tính có thể liên hệ với Steven nếu muốn trải nghiệm "chế độ kiểm tra"<br><b>Danh sách phát hành</b><br>Dự án này đươc trình bày một cách vắn tắt ở Hội thảo CLI tại ACM ICPC World Finals 2012 (Warsaw, Ba Lan) và tại Hội nghị IOI 2012 (Sirmione-Montichiari, Italy). Bạn có thể nhấn vào link này để đọc bài viết năm 2012 của chúng tôi về hệ thống này (nó không được gọi là VisuAlgo vào năm 2012)<br>Dự án này được hoàn thiện hầu hết bởi những cựu sinh viên của tôi. Báo cáo cuối cùng gần đây nhất là của: <a href="http://188.166.247.199/visualgo/visualgo-laravel/public/translation/fyp/erin-report.pdf" target="_blank">Erin</a>, <a href="http://188.166.247.199/visualgo/visualgo-laravel/public/translation/fyp/wangzi-report.pdf" target="_blank">Wang Zi</a>, <a href="http://188.166.247.199/visualgo/visualgo-laravel/public/translation/fyp/rose-report.pdf" target="_blank">Rose</a>, <a href="http://188.166.247.199/visualgo/visualgo-laravel/public/translation/fyp/ivan-report.pdf" target="_blank">Ivan</a>.<br><b>Báo cáo lỗi hoặc đề xuất tính năng mới</b><br>VisuAlgo là một dự án chưa hoàn thiện. Tiến sĩ Steven Halim vẫn đang tiếp tục phát triển VisuAlgo một cách tích cực/ Nếu bạn đang sử dụng VisuAlgo và phát hiện ra lỗi ở bất kỳ trang mô phỏng/ công cụ câu hỏi trực tuyến nào của chúng tôi hoặc nếu bạn muốn đề xuất những tính năng mới, hãy liên lạc với Tiến sĩ Steven Halim. Địa chỉ liên lạc của ông ấy là stevenhalim@gmail.com<br>
</div>
</div>

<script src="../js/jquery-3.3.1.min.js"></script>
<script>
      var PHP_DOMAIN = "";

      // surprise colour!
      // Referenced to in  home.js and viz.js also
      var colourArray = ["#52bc69", "#d65775"/*"#ed5a7d"*/, "#2ebbd1", "#d9513c", "#fec515", "#4b65ba", "#ff8a27", "#a7d41e"]; // green, pink, blue, red, yellow, indigo, orange, lime

      function disableScroll() { $('html').css('overflow', 'hidden'); }

      function enableScroll() { $('html').css('overflow', 'visible'); }

      function replaceAll(find, replace, str) { return str.replace(new RegExp(find, 'g'), replace); }

      function getColours() {
        var generatedColours = new Array();
        while (generatedColours.length < 4) {
          var n = (Math.floor(Math.random() * colourArray.length));
          if ($.inArray(n, generatedColours) == -1)
            generatedColours.push(n);
        }
        return generatedColours;
      }

      function isOn(value, position) {
        return (value>>position) & 1 === 1;
      }

      function customAlert(msg) {
        $('#custom-alert p').html(msg);
        var m = -1 * ($('#custom-alert').outerHeight()/2);
        $('#custom-alert').css('margin-top', m+'px');
        $('#dark-overlay').fadeIn(function() {
          $('#custom-alert').fadeIn(function() {
            setTimeout(function() {
              $('#custom-alert').fadeOut(function() {
                $('#dark-overlay').fadeOut();
              });
            }, 1000);
          });
        });
      }

      function showLoadingScreen() {
        $('#loading-overlay').show();
        $('#loading-message').show();
      }

      function hideLoadingScreen() {
        $('#loading-overlay').hide();
      }

      function commonAction(retval, msg) {
        //setTimeout(function() {
          if (retval) { // mode == "exploration" && // now not only for exploration mode, but check if this opens other problems
            $('#current-action').show();
            $('#current-action').html(mode == "exploration" ? msg : ("e-Lecture Example (auto play until done)<br>" + msg));
            $('#progress-bar').slider("option", "max", gw.getTotalIteration()-1);
            triggerRightPanels();
            isPlaying = true;
          }
        //}, 500);
      }

      function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split('&');
        for (var i = 0; i < vars.length; i++) {
          var pair = vars[i].split('=');
          if (decodeURIComponent(pair[0]) == variable)
            return decodeURIComponent(pair[1]);
        }
        return "";
      }

      var generatedColours = getColours();
      var surpriseColour = colourArray[generatedColours[0]];
      var colourTheSecond = colourArray[generatedColours[1]];
      var colourTheThird = colourArray[generatedColours[2]];
      var colourTheFourth = colourArray[generatedColours[3]];

      $(function() {
        $('.links').css('background', surpriseColour);
        $('.right-links').css('background', surpriseColour);
        $('#login-go').css('background', surpriseColour);

        $('.colour').css("color", surpriseColour); // name
        $('h4').css("background-color", surpriseColour); // about, contact us etc. button background

        // title
        $('#title a').click(function() {
          $('#title a').removeClass('selected-viz');
          $(this).addClass('selected-viz');
          // temporary quick fix for Google Chrome Aug 2016 issue...
          setTimeout(function(){ document.body.style.zoom = "100.1%"; }, 100); // force resize/redraw...
          setTimeout(function(){ document.body.style.zoom = "100%"; }, 600);
        });

        // overlays stuffs
        $('#trigger-about').click(function() {
          if ($(window).width() > 600) {
            $('#dark-overlay').fadeIn(function() {
              $('#about').fadeIn();
            });
          }
          else
            alert('Sorry, this dialog is too big. Please load it on bigger screen');
        });

        $('#trigger-team').click(function() {
          if ($(window).width() > 600) {
            $('#dark-overlay').fadeIn(function() {
              $('#team').fadeIn();
            });
          }
          else
            alert('Sorry, this dialog is too big. Please load it on bigger screen');
        });

        $('#trigger-terms').click(function() {
          if ($(window).width() > 600) {
            $('#dark-overlay').fadeIn(function() {
              $('#termsofuse').fadeIn();
            });
          }
          else
            alert('Sorry, this dialog is too big. Please load it on bigger screen');
        });

        $('.close-overlay').click(function() {
          $('.overlays').fadeOut(function() {
            $('#dark-overlay').fadeOut();
          });
        });

        $('#dark-overlay').click(function() {
          $('.overlays').fadeOut();
          $('#dark-overlay').fadeOut();
        });

        $.get('/isloggedin', function(data) {
          var isLoggedIn = data['isloggedin'] == '1';
          var element;
          if (isLoggedIn) {
            // element = '<a onclick="verifyLogout()">Đăng Xuất<div><br></div></a>';
            element = '<a href="https://visualgo.net/profile">Profile</a>'; 
          }
          else {
            element = '<a href="https://visualgo.net/login">Đăng nhập</a>'
          }
          $('#useraccount').html(element);
        });
      });

      function verifyLogout() {
        // Steven's remarks: use a better 'confirm' than the default :(
        var doesLogout = confirm('Are you sure to logout?');
        if (doesLogout == true) {
          window.location = "https://visualgo.net/logout";
        }
      }

      function checkLogin() {
        $.get('/checklogin', function(data) {
          var url = data['url'];
          window.location.href = '/' + url;
        });
      }

      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','../../www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-1566631-4', 'auto');
      ga('send', 'pageview');
    </script>

<script src="../js/jquery-ui.min.js"></script>

<script src="../js/d3.min.js"></script>
<script src="../js/viz-1.0.3.js"></script>
<script src="../js/visualgo_print.js"></script>
<script src="../js/graph_library.js"></script>
<script>
      function runSlide(slide) {
        if (slide == '1') {
          $("#e-lecture").html("slide " + slide + " (" + 3 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '1-1') {
          $("#e-lecture").html("slide " + slide + " (" + 6 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '1-2') {
          $("#e-lecture").html("slide " + slide + " (" + 9 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '1-3') {
          $("#e-lecture").html("slide " + slide + " (" + 12 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '2') {
          $("#e-lecture").html("slide " + slide + " (" + 15 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '3') {
          $("#e-lecture").html("slide " + slide + " (" + 18 + "%)");
          $("#draw").addClass("menu-highlighted");
$("#examples").click().addClass("menu-highlighted");
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '4') {
          $("#e-lecture").html("slide " + slide + " (" + 21 + "%)");
          $("#kruskals").addClass("menu-highlighted");
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '4-1') {
          $("#e-lecture").html("slide " + slide + " (" + 25 + "%)");
          $("#kruskals").addClass("menu-highlighted");
loadGraph({
  'vl': {
    0: { "x": 50, "y": 50 },
    1: { "x": 250, "y": 50 },
    2: { "x": 50, "y": 250 },
    3: { "x": 250, "y": 250 }
  },
  'el': {
    0: { "u": 0, "v": 1, "w": 1 },
    1: { "u": 0, "v": 2, "w": 2 },
    2: { "u": 0, "v": 3, "w": 1 },
    3: { "u": 1, "v": 3, "w": 1 },
    4: { "u": 2, "v": 3, "w": 3 }
  }
});
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '4-2') {
          $("#e-lecture").html("slide " + slide + " (" + 28 + "%)");
          $("#kruskals").addClass("menu-highlighted");
loadGraph({
  'vl': {
    0: { "x": 50, "y": 50 },
    1: { "x": 250, "y": 50 },
    2: { "x": 50, "y": 250 },
    3: { "x": 250, "y": 250 }
  },
  'el': {
    0: { "u": 0, "v": 1, "w": 1 },
    1: { "u": 0, "v": 2, "w": 2 },
    2: { "u": 0, "v": 3, "w": 1 },
    3: { "u": 1, "v": 3, "w": 1 },
    4: { "u": 2, "v": 3, "w": 3 }
  }
});
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '4-3') {
          $("#e-lecture").html("slide " + slide + " (" + 31 + "%)");
          $("#kruskals").addClass("menu-highlighted");
loadGraph({
  'vl': {
    0: { "x": 50, "y": 50 },
    1: { "x": 250, "y": 50 },
    2: { "x": 50, "y": 250 },
    3: { "x": 250, "y": 250 }
  },
  'el': {
    0: { "u": 0, "v": 1, "w": 1 },
    1: { "u": 0, "v": 2, "w": 2 },
    2: { "u": 0, "v": 3, "w": 1 },
    3: { "u": 1, "v": 3, "w": 1 },
    4: { "u": 2, "v": 3, "w": 3 }
  }
});
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '4-4') {
          $("#e-lecture").html("slide " + slide + " (" + 34 + "%)");
          $("#kruskals").addClass("menu-highlighted");
loadGraph({
  'vl': {
    0: { "x": 50, "y": 50 },
    1: { "x": 250, "y": 50 },
    2: { "x": 50, "y": 250 },
    3: { "x": 250, "y": 250 }
  },
  'el': {
    0: { "u": 0, "v": 1, "w": 1 },
    1: { "u": 0, "v": 2, "w": 2 },
    2: { "u": 0, "v": 3, "w": 1 },
    3: { "u": 1, "v": 3, "w": 1 },
    4: { "u": 2, "v": 3, "w": 3 }
  }
});
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '4-5') {
          $("#e-lecture").html("slide " + slide + " (" + 37 + "%)");
          $("#kruskals").addClass("menu-highlighted");
loadGraph({
  'vl': {
    0: { "x": 50, "y": 50 },
    1: { "x": 250, "y": 50 },
    2: { "x": 50, "y": 250 },
    3: { "x": 250, "y": 250 }
  },
  'el': {
    0: { "u": 0, "v": 1, "w": 1 },
    1: { "u": 0, "v": 2, "w": 2 },
    2: { "u": 0, "v": 3, "w": 1 },
    3: { "u": 1, "v": 3, "w": 1 },
    4: { "u": 2, "v": 3, "w": 3 }
  }
});
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '4-6') {
          $("#e-lecture").html("slide " + slide + " (" + 40 + "%)");
          $("#kruskals").addClass("menu-highlighted");
loadGraph({
  'vl': {
    0: { "x": 50, "y": 50 },
    1: { "x": 250, "y": 50 },
    2: { "x": 50, "y": 250 },
    3: { "x": 250, "y": 250 }
  },
  'el': {
    0: { "u": 0, "v": 1, "w": 1 },
    1: { "u": 0, "v": 2, "w": 2 },
    2: { "u": 0, "v": 3, "w": 1 },
    3: { "u": 1, "v": 3, "w": 1 },
    4: { "u": 2, "v": 3, "w": 3 }
  }
});
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '4-7') {
          $("#e-lecture").html("slide " + slide + " (" + 43 + "%)");
          $("#kruskals").addClass("menu-highlighted");
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '5') {
          $("#e-lecture").html("slide " + slide + " (" + 46 + "%)");
          $("#prims").click().addClass("menu-highlighted");
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '5-1') {
          $("#e-lecture").html("slide " + slide + " (" + 50 + "%)");
          $("#prims").click().addClass("menu-highlighted");
loadGraph({
  'vl': {
    0: { "x": 50, "y": 50 },
    1: { "x": 250, "y": 50 },
    2: { "x": 50, "y": 250 },
    3: { "x": 250, "y": 250 }
  },
  'el': {
    0: { "u": 0, "v": 1, "w": 1 },
    1: { "u": 0, "v": 2, "w": 2 },
    2: { "u": 0, "v": 3, "w": 1 },
    3: { "u": 1, "v": 3, "w": 1 },
    4: { "u": 2, "v": 3, "w": 3 }
  }
});
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '5-2') {
          $("#e-lecture").html("slide " + slide + " (" + 53 + "%)");
          $("#prims").click().addClass("menu-highlighted");
loadGraph({
  'vl': {
    0: { "x": 50, "y": 50 },
    1: { "x": 250, "y": 50 },
    2: { "x": 50, "y": 250 },
    3: { "x": 250, "y": 250 }
  },
  'el': {
    0: { "u": 0, "v": 1, "w": 1 },
    1: { "u": 0, "v": 2, "w": 2 },
    2: { "u": 0, "v": 3, "w": 1 },
    3: { "u": 1, "v": 3, "w": 1 },
    4: { "u": 2, "v": 3, "w": 3 }
  }
});
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '5-3') {
          $("#e-lecture").html("slide " + slide + " (" + 56 + "%)");
          $("#prims").click().addClass("menu-highlighted");
loadGraph({
  'vl': {
    0: { "x": 50, "y": 50 },
    1: { "x": 250, "y": 50 },
    2: { "x": 50, "y": 250 },
    3: { "x": 250, "y": 250 }
  },
  'el': {
    0: { "u": 0, "v": 1, "w": 1 },
    1: { "u": 0, "v": 2, "w": 2 },
    2: { "u": 0, "v": 3, "w": 1 },
    3: { "u": 1, "v": 3, "w": 1 },
    4: { "u": 2, "v": 3, "w": 3 }
  }
});
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '5-4') {
          $("#e-lecture").html("slide " + slide + " (" + 59 + "%)");
          $("#prims").click().addClass("menu-highlighted");
loadGraph({
  'vl': {
    0: { "x": 50, "y": 50 },
    1: { "x": 250, "y": 50 },
    2: { "x": 50, "y": 250 },
    3: { "x": 250, "y": 250 }
  },
  'el': {
    0: { "u": 0, "v": 1, "w": 1 },
    1: { "u": 0, "v": 2, "w": 2 },
    2: { "u": 0, "v": 3, "w": 1 },
    3: { "u": 1, "v": 3, "w": 1 },
    4: { "u": 2, "v": 3, "w": 3 }
  }
});
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '5-5') {
          $("#e-lecture").html("slide " + slide + " (" + 62 + "%)");
          $("#prims").click().addClass("menu-highlighted");
loadGraph({
  'vl': {
    0: { "x": 50, "y": 50 },
    1: { "x": 250, "y": 50 },
    2: { "x": 50, "y": 250 },
    3: { "x": 250, "y": 250 }
  },
  'el': {
    0: { "u": 0, "v": 1, "w": 1 },
    1: { "u": 0, "v": 2, "w": 2 },
    2: { "u": 0, "v": 3, "w": 1 },
    3: { "u": 1, "v": 3, "w": 1 },
    4: { "u": 2, "v": 3, "w": 3 }
  }
});
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '5-6') {
          $("#e-lecture").html("slide " + slide + " (" + 65 + "%)");
          $("#prims").click().addClass("menu-highlighted");
          showActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '6') {
          $("#e-lecture").html("slide " + slide + " (" + 68 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '6-1') {
          $("#e-lecture").html("slide " + slide + " (" + 71 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7') {
          $("#e-lecture").html("slide " + slide + " (" + 75 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7-1') {
          $("#e-lecture").html("slide " + slide + " (" + 78 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7-2') {
          $("#e-lecture").html("slide " + slide + " (" + 81 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7-3') {
          $("#e-lecture").html("slide " + slide + " (" + 84 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '7-4') {
          $("#e-lecture").html("slide " + slide + " (" + 87 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '99') {
          $("#e-lecture").html("slide " + slide + " (" + 90 + "%)");
          
          hideEntireActionsPanel();
 
          showStatusPanel();
          showCodetracePanel();
      
        }
        if (slide == '99-1') {
          $("#e-lecture").html("slide " + slide + " (" + 93 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '99-2') {
          $("#e-lecture").html("slide " + slide + " (" + 96 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
        if (slide == '99-3') {
          $("#e-lecture").html("slide " + slide + " (" + 100 + "%)");
          
          hideEntireActionsPanel();
          hideStatusPanel();
          hideCodetracePanel();
      
        }
      }

      window.onpopstate = function(event) {
        var slide = event.state['slide'];
        openSlide(slide, function() {
          runSlide(slide);
        });
      };

      function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'), sParameterName, i;

        for (i = 0; i < sURLVariables.length; i++) {
          sParameterName = sURLVariables[i].split('=');
          if (sParameterName[0] === sParam) return sParameterName[1] === undefined ? true : sParameterName[1];
        }
      };

      function pushState(slideValue) {
        var url = '/vi/mst';
        if (typeof slideValue != 'undefined' && slideValue != null) url += '?slide=' + slideValue;
        window.history.pushState({slide: slideValue}, "slide " + slideValue, url);
      }

      function showPopup(callback) {
        $('#popup').fadeIn(100, callback);
      }

      function hidePopup(callback) {
        $('#popup').fadeOut(100, callback);
      }

      function showOverlay() {
        $('#overlay').css('opacity', 0.5); 
        $('#overlay').show();
      }

      function hideOverlay() {
        $('#overlay').hide();
        $("#e-lecture").html("");
      }

      function makeOverlayTransparent() {
        $('#overlay').css('opacity', 0);
      }

      function hideSlide(callback) {
        isPlaying = true;
        closeSlide(cur_slide, function() {
          makeOverlayTransparent();
          setTimeout(callback, 700); // don't immediately run the animation, wait for 500ms+ first
        });
      }

      function showSlide() {
        isPlaying = false;
        openSlide(cur_slide);
        showOverlay();
      }

      $(function() {
        var slide = getUrlParameter('slide');
        
        $.get('/hasvisited' + '/mst', function(data) {
          var hasVisited = data['hasvisited'] == '1';
          if (!hasVisited) {
            var postData = {
              '_token': 'iVivZ7KRPe6XK7pbuGtOoEjljE1xyBVNhLKNFuF8',
              'page': '/mst'.substring(1),
            };

            $.post("/visitpage", postData, function(data) {
              // non critical request...
            });

            if (typeof slide != undefined && slide != null) {
              cur_slide = slide;
            }

            $("#mode-menu a").trigger("click");
          }
          else {
            if (typeof slide != undefined && slide != null) {
              cur_slide = slide;
              $('#mode-menu a').click();
            }    
          }
        }).fail(function() {
          if (typeof slide != undefined && slide != null) {
            cur_slide = slide;
            $('#mode-menu a').click();
          }
        });

        $('.mcq-submit').click(function() {
          var questionId = parseInt($(this).attr('id').split('-')[1]);
          var answer = $('#mcq-answer-' + questionId).val();
          var userAnswer = $('input[type=radio][name=mcq-'+questionId+'-choice]:checked').val();

          if (answer === userAnswer) {
            $('#answer-status-' + questionId).html('<font color="green"><b>Correct!</b></font>');
          }
          else {
            $('#answer-status-' + questionId).html('<font color="red"><b>Wrong Answer! Try again...</b></font>');
          }
          $('#answer-status-' + questionId).show();
          setTimeout(function() {
            $('#answer-status-' + questionId).fadeOut(1000);
          }, 1000);
        });

        $('.msq-submit').click(function() {
          var questionId = parseInt($(this).attr('id').split('-')[1]);
          var answer = $('#msq-answer-' + questionId).val();

          var answers = [];
          $('input[type=checkbox][class=msq-choice]:checked').each(function() {
            answers.push($(this).attr('id').split('-')[3]);
          });
          answers.sort();
          var userAnswer = answers.join(',');

          if (answer === userAnswer) {
            $('#answer-status-' + questionId).html('<font color="green">Correct!</font>');
          }
          else {
            $('#answer-status-' + questionId).html('<font color="red">Wrong Answer! Try again...</font>');
          }
          $('#answer-status-' + questionId).show();
          setTimeout(function() {
            $('#answer-status-' + questionId).fadeOut(1000);
          }, 1000);
        });

        $('select.lecture-dropdown').change(function() {
          var nextSlide = $(this).val();
          openSlide(nextSlide, function() {
            runSlide(nextSlide);
            pushState(nextSlide);
          });
        });

        $('#hide-popup').click(function() {
          hidePopup();
        });

        $('#popup').hover(function() {
          $('#hide-popup').show();
        }, function() {
          $('#hide-popup').hide();
        });

        $('#electure-1 .electure-next').click(function() {
          hidePopup();
          runSlide('1-1');
          pushState('1-1');
        });
      
        $('#electure-1-1 .electure-next').click(function() {
          hidePopup();
          runSlide('1-2');
          pushState('1-2');
        });
        $('#electure-1-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('1');
          pushState('1');
        });
      
        $('#electure-1-2 .electure-next').click(function() {
          hidePopup();
          runSlide('1-3');
          pushState('1-3');
        });
        $('#electure-1-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('1-1');
          pushState('1-1');
        });
      
        $('#electure-1-3 .electure-next').click(function() {
          hidePopup();
          runSlide('2');
          pushState('2');
        });
        $('#electure-1-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('1-2');
          pushState('1-2');
        });
      
        $('#electure-2 .electure-next').click(function() {
          hidePopup();
          runSlide('3');
          pushState('3');
        });
        $('#electure-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('1-3');
          pushState('1-3');
        });
      
        $('#electure-3 .electure-next').click(function() {
          hidePopup();
          runSlide('4');
          pushState('4');
        });
        $('#electure-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('2');
          pushState('2');
        });
      
        $('#electure-4 .electure-next').click(function() {
          hidePopup();
          runSlide('4-1');
          pushState('4-1');
        });
        $('#electure-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('3');
          pushState('3');
        });
      
        $('#electure-4-1 .electure-next').click(function() {
          hidePopup();
          runSlide('4-2');
          pushState('4-2');
        });
        $('#electure-4-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('4');
          pushState('4');
        });
      
        $('#electure-4-2 .electure-next').click(function() {
          hidePopup();
          runSlide('4-3');
          pushState('4-3');
        });
        $('#electure-4-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('4-1');
          pushState('4-1');
        });
      
        $('#electure-4-3 .electure-next').click(function() {
          hidePopup();
          runSlide('4-4');
          pushState('4-4');
        });
        $('#electure-4-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('4-2');
          pushState('4-2');
        });
      
        $('#electure-4-4 .electure-next').click(function() {
          hidePopup();
          runSlide('4-5');
          pushState('4-5');
        });
        $('#electure-4-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('4-3');
          pushState('4-3');
        });
      
        $('#electure-4-5 .electure-next').click(function() {
          hidePopup();
          runSlide('4-6');
          pushState('4-6');
        });
        $('#electure-4-5 .electure-prev').click(function() {
          hidePopup();
          runSlide('4-4');
          pushState('4-4');
        });
      
        $('#electure-4-6 .electure-next').click(function() {
          hidePopup();
          runSlide('4-7');
          pushState('4-7');
        });
        $('#electure-4-6 .electure-prev').click(function() {
          hidePopup();
          runSlide('4-5');
          pushState('4-5');
        });
      
        $('#electure-4-7 .electure-next').click(function() {
          hidePopup();
          runSlide('5');
          pushState('5');
        });
        $('#electure-4-7 .electure-prev').click(function() {
          hidePopup();
          runSlide('4-6');
          pushState('4-6');
        });
      
        $('#electure-5 .electure-next').click(function() {
          hidePopup();
          runSlide('5-1');
          pushState('5-1');
        });
        $('#electure-5 .electure-prev').click(function() {
          hidePopup();
          runSlide('4-7');
          pushState('4-7');
        });
      
        $('#electure-5-1 .electure-next').click(function() {
          hidePopup();
          runSlide('5-2');
          pushState('5-2');
        });
        $('#electure-5-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('5');
          pushState('5');
        });
      
        $('#electure-5-2 .electure-next').click(function() {
          hidePopup();
          runSlide('5-3');
          pushState('5-3');
        });
        $('#electure-5-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('5-1');
          pushState('5-1');
        });
      
        $('#electure-5-3 .electure-next').click(function() {
          hidePopup();
          runSlide('5-4');
          pushState('5-4');
        });
        $('#electure-5-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('5-2');
          pushState('5-2');
        });
      
        $('#electure-5-4 .electure-next').click(function() {
          hidePopup();
          runSlide('5-5');
          pushState('5-5');
        });
        $('#electure-5-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('5-3');
          pushState('5-3');
        });
      
        $('#electure-5-5 .electure-next').click(function() {
          hidePopup();
          runSlide('5-6');
          pushState('5-6');
        });
        $('#electure-5-5 .electure-prev').click(function() {
          hidePopup();
          runSlide('5-4');
          pushState('5-4');
        });
      
        $('#electure-5-6 .electure-next').click(function() {
          hidePopup();
          runSlide('6');
          pushState('6');
        });
        $('#electure-5-6 .electure-prev').click(function() {
          hidePopup();
          runSlide('5-5');
          pushState('5-5');
        });
      
        $('#electure-6 .electure-next').click(function() {
          hidePopup();
          runSlide('6-1');
          pushState('6-1');
        });
        $('#electure-6 .electure-prev').click(function() {
          hidePopup();
          runSlide('5-6');
          pushState('5-6');
        });
      
        $('#electure-6-1 .electure-next').click(function() {
          hidePopup();
          runSlide('7');
          pushState('7');
        });
        $('#electure-6-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('6');
          pushState('6');
        });
      
        $('#electure-7 .electure-next').click(function() {
          hidePopup();
          runSlide('7-1');
          pushState('7-1');
        });
        $('#electure-7 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-1');
          pushState('6-1');
        });
      
        $('#electure-7-1 .electure-next').click(function() {
          hidePopup();
          runSlide('7-2');
          pushState('7-2');
        });
        $('#electure-7-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('7');
          pushState('7');
        });
      
        $('#electure-7-2 .electure-next').click(function() {
          hidePopup();
          runSlide('7-3');
          pushState('7-3');
        });
        $('#electure-7-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-1');
          pushState('7-1');
        });
      
        $('#electure-7-3 .electure-next').click(function() {
          hidePopup();
          runSlide('7-4');
          pushState('7-4');
        });
        $('#electure-7-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-2');
          pushState('7-2');
        });
      
        $('#electure-7-4 .electure-next').click(function() {
          hidePopup();
          runSlide('99');
          pushState('99');
        });
        $('#electure-7-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-3');
          pushState('7-3');
        });
      
        $('#electure-99 .electure-next').click(function() {
          hidePopup();
          runSlide('99-1');
          pushState('99-1');
        });
        $('#electure-99 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-4');
          pushState('7-4');
        });
      
        $('#electure-99-1 .electure-next').click(function() {
          hidePopup();
          runSlide('99-2');
          pushState('99-2');
        });
        $('#electure-99-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('99');
          pushState('99');
        });
      
        $('#electure-99-2 .electure-next').click(function() {
          hidePopup();
          runSlide('99-3');
          pushState('99-3');
        });
        $('#electure-99-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('99-1');
          pushState('99-1');
        });
      
        $('#electure-99-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('99-2');
          pushState('99-2');
        });
      
 

        // temporary quick fix for Google Chrome Aug 2016 issue..., put at last part so that everything else has been loaded
        // setTimeout(function(){ document.body.style.zoom = "100.1%"; }, 500);
        // setTimeout(function(){ document.body.style.zoom = "100%"; }, 600);
        // I turn it off on 14 June 2018, seems 'ok'?
      });

      function doButtonAction21() {
        URL('https://cpbook.net/code/ch4.zip');
      }
      function doButtonAction30() {
        CUSTOM_ACTION('kruskal');
      }
      function doButtonAction31() {
        CUSTOM_ACTION('prim', 1);
      }

      function adjustPopupToImageSize() {
        var width = $('#popup-image').prop('width');
        var height = $('#popup-image').prop('height');
        $('#popup').width(width + 20);
        $('#popup').height(height + 20);
        if (width == 0 && height == 0) {
          setTimeout(adjustPopupToImageSize, 200);
        } else {
          showPopup();  
        }
      }

      function POPUP_IMAGE(url) {
        $('#popup-content').html('<img id="popup-image" src="' + url + '">');
        adjustPopupToImageSize();
      }

      function URL(url.html) {
        window.open(url, '_blank');
      }

      // Implement these functions in each visualisation
      // This function will be called before entering e-Lecture Mode
      function ENTER_LECTURE_MODE() {}

      // This function will be called before returning to Explore Mode
      function ENTER_EXPLORE_MODE() {}

      // Lecture action functions
      function CUSTOM_ACTION(action, data, mode) {}
    </script>
<script type="text/javascript">
// MST Widget
// original author: Ivan Reinaldo, then maintained by Steven Halim

var MST = function() {
  var self = this;
  var gw = new GraphWidget();

  var iVL = {};
  var iEL = {};
  var iAL = {}; // special, for Prim's
  var amountVertex = 0;
  var amountEdge = 0;

  this.getGraphWidget = function() { return gw; }

  fixJSON = function() {
    amountVertex = 0;
    amountEdge = 0;
    for (var key in iVL) amountVertex++;
    for (var key in iEL) amountEdge++;

    var sortedArray = [];
    for (key in iEL) {
      sortedArray.push(new ObjectTriple(parseInt(iEL[key]["w"]), parseInt(iEL[key]["u"]), parseInt(iEL[key]["v"])));
    }
    sortedArray.sort(ObjectTriple.compare); // sort by increasing w, and if ties, by increasing u, and if still ties, by increasing v

    for (var i = 0; i < sortedArray.length; i++) { // rearrange the keys in iEL based on our custom sort order
      iEL[i]["w"] = sortedArray[i].getFirst();
      iEL[i]["u"] = sortedArray[i].getSecond();
      iEL[i]["v"] = sortedArray[i].getThird();
    }

    for (var key in iVL) iAL[key] = Array();
    for (var key in iEL) { // transform EL to AL (for Prim's)
      iAL[iEL[key]["u"]].push(new ObjectTriple(iEL[key]["v"], iEL[key]["w"], key));
      iAL[iEL[key]["v"]].push(new ObjectTriple(iEL[key]["u"], iEL[key]["w"], key)); // bidirectional
    }
  }

  takeJSON = function(graph) {
    if (graph == null) return;
    graph = JSON.parse(graph);
    iVL = graph["vl"];
    iEL = graph["el"];
    fixJSON();
  }

  statusChecking = function() {
    $("#draw-status p").html("<div><br></div>");
  }

  warnChecking = function() {
    var warn = "";
    if (amountVertex >= 17) warn += "Quá nhiểu đỉnh trên màn hình, nên vẽ một đồ thị nhỏ hơn.";
    if (warn == "") $("#draw-warn p").html("No Warning");
    else            $("#draw-warn p").html(warn);
  }

  errorChecking = function() {
    var error = "";
    if (amountVertex == 0) {
      $("#draw-err p").html("Đồ thị không thể rỗng.");
      return;
    }

    if (amountVertex == 1) {
      $("#draw-err p").html("Đồ thị phải chứa ít nhất một cạnh.");
      return;
    }

    var visited = [];
    var stack = [];
    stack.push(0);
    visited[0] = true;
    while (stack.length > 0) {
      var now = stack.pop();
      for (var key2 in iEL) {
        if (iEL[key2]["u"] == now && !visited[iEL[key2]["v"]]) {
          visited[iEL[key2]["v"]] = true;
          stack.push(+iEL[key2]["v"]);
        }
        if (iEL[key2]["v"] == now && !visited[iEL[key2]["u"]]) {
          visited[iEL[key2]["u"]] = true;
          stack.push(+iEL[key2]["u"]);
        }
      }
    }

    for (var i = 0; i < amountVertex; i++)
      if (!visited[i]) {
        error = error + "Đỉnh 0 và đỉnh {i} không nối với nhau.".replace("{i}", i);
        break;
      }

    if (error == "") $("#draw-err p").html("Đồ thị phải chứa ít nhất một cạnh.");
    else             $("#draw-err p").html(error);
  }

  var intervalID;

  this.startLoop = function() {
    intervalID = setInterval(function() {
      takeJSON(JSONresult);
      warnChecking();
      errorChecking();
      statusChecking();
    }, 100);
  }

  this.stopLoop = function() {
    clearInterval(intervalID);
  }

  this.draw = function() {
    if ($("#draw-err p").html() != "Đồ thị phải chứa ít nhất một cạnh.")
      return false;
    if ($("#submit").is(':checked'))
      this.submit(JSONresult);
    if ($("#copy").is(':checked'))
      window.prompt("Sao chép vào clipboard:", JSONresult);

    fixJSON(); // to re-sort the edges

    graph = createState(iVL, iEL);
    gw.updateGraph(graph, 500);
    return true;
  }

  this.importjson = function(text) {
    takeJSON(text);
    statusChecking();
    graph = createState(iVL, iEL);
    gw.updateGraph(graph, 500);
  }



  this.getGraph = function() {
    return {
      'vl': iVL,
      'el': iEL
    };
  }

  this.getV = function() {
    return amountVertex;
  }

  this.kruskal = function(callback) {
    var i, key, totalWeight = 0, cs;
    var stateList = [], sortedArray = [];
    var vertexHighlighted = {}, edgeHighlighted = {}, vertexTraversed = {}, edgeTraversed = {}, edgeQueued = {};
    var tempUfds = new UfdsHelper();

    if (amountVertex == 0) { // error check, no graph (maybe via empty JSON or faulty db)
      $('#kruskals-err').html("Không có đồ thị để chạy. Hãy chọn một đồ thị ví dụ trước..");
      return false;
    }

    for (key in iVL) tempUfds.insert(key);

    for (key in iEL) {
      edgeQueued[key] = true;
      sortedArray.push(new ObjectPair(parseInt(iEL[key]["w"]), parseInt(key)));
    }
    sortedArray.sort(ObjectPair.compare);

    function sortedArrayToString() {
      var ansStr = "";
      var maxLength = Math.min(sortedArray.length, 9);
      for (var i = 0; i < maxLength; i++) {
        var thisEdgeId = sortedArray[i].getSecond();
        ansStr += "(" + iEL[thisEdgeId]["w"] + ",(" + iEL[thisEdgeId]["u"] + "," + iEL[thisEdgeId]["v"] + "))";
        if (i < (maxLength-1)) ansStr += ", ";
      }
      if (sortedArray.length > 10) ansStr += " ...";
      return ansStr;
    }

    cs = createState(iVL, iEL);
    cs["status"] = "Các cạnh không được sắp xếp tăng dần theo giá trị của trọng số:  " + sortedArrayToString() + ".";
    cs["lineNo"] = [1, 2];
    stateList.push(cs);

    numTaken = 0;
    while (sortedArray.length > 0) {
      cs = createState(iVL, iEL, vertexHighlighted, edgeHighlighted, vertexTraversed, edgeTraversed, edgeQueued);
      cs["status"] = "Những cạnh còn lại là " + sortedArrayToString() + ".";
      cs["lineNo"] = 3;
      stateList.push(cs);

      var dequeuedEdge = sortedArray.shift();
      var dequeuedEdgeId = dequeuedEdge.getSecond();
      var u = iEL[dequeuedEdgeId]["u"], v = iEL[dequeuedEdgeId]["v"], w = parseInt(iEL[dequeuedEdgeId]["w"]);

      edgeHighlighted[dequeuedEdgeId] = true;
      vertexHighlighted[u] = true;
      vertexHighlighted[v] = true;

      cs = createState(iVL, iEL, vertexHighlighted, edgeHighlighted, vertexTraversed, edgeTraversed, edgeQueued);
      cs["status"] = "Kiểm tra có xuất hiện một chu trình nếu chúng ta thêm cạnh này:  (" + w + ",(" + u + "," + v + ")).";
      cs["lineNo"] = 4;
      stateList.push(cs);

      var noCycle = false;
      if (!tempUfds.isSameSet(u, v)) {
        noCycle = true;
        tempUfds.unionSet(u, v);
        edgeTraversed[dequeuedEdgeId] = true;
        vertexTraversed[u] = true;
        vertexTraversed[v] = true;
        totalWeight += w;
      }

      delete edgeHighlighted[dequeuedEdgeId];
      delete edgeQueued[dequeuedEdgeId]
      delete vertexHighlighted[u];
      delete vertexHighlighted[v];

      cs = createState(iVL, iEL, vertexHighlighted, edgeHighlighted, vertexTraversed, edgeTraversed, edgeQueued);
      if (noCycle) {
        cs["status"] = "Thêm cạnh đấy sẽ không tạo thành chu trình, vì thế chúng ta thêm nó vào T. Trọng số của T bây giờ là " + totalWeight + ".";
        cs["lineNo"] = 5;
        numTaken++;
      }
      else {
        cs["status"] = "cạnh đấy sẽ tạo thành một chu trình, vì vậy chúng ta bỏ qua nó. Trọng số hiện tại của T giữ nguyên là " + totalWeight + ".";
        cs["lineNo"] = 6;
      }
      stateList.push(cs);

      if (noCycle && (numTaken == amountVertex-1)) {
        cs = createState(iVL, iEL, vertexHighlighted, edgeHighlighted, vertexTraversed, edgeTraversed, edgeQueued);
        cs["status"] = (amountVertex-1) + " edges have been taken by Kruskal&#39;s, so the MST has been found.<br>An optimized version of Kruskal&#39;s algorithm can stop here."; // the animation will still run until the end
        cs["lineNo"] = 5;
        stateList.push(cs);
      }
    }

    cs = createState(iVL, iEL, vertexHighlighted, edgeHighlighted, vertexTraversed, edgeTraversed, edgeQueued);
    cs["status"] = "The highlighted vertices and edges form an MST with weight = " + totalWeight + ".<br><b><a href=\"https://cpbook.net/#downloads\" target=\"_blank\">ch4_03_kruskal_prim.cpp/java, ch4.zip, CP3</a></b>.";
    cs["lineNo"] = 7;
    stateList.push(cs);

    populatePseudocode(1);
    gw.startAnimation(stateList, callback);
    return true;
  }

  this.prim = function(sourceVertex, callback) {
    var i, key, totalWeight = 0, cs;
    var visited = {}, vertexHighlighted = {}, edgeHighlighted = {}, vertexTraversed = {}, edgeTraversed = {}, edgeQueued = {};
    var stateList = [];

    // error checks
    if (amountVertex == 0) { // no graph
      $('#prims-err').html("Không có đồ thị để chạy. Hãy chọn một đồ thị ví dụ trước..");
      return false;
    }

    if (sourceVertex >= amountVertex || sourceVertex < 0) { // start vertex not in range
      $('#prims-err').html("Cạnh này không tồn tại trong đồ thị");
      return false;
    }

    for (key in iVL) visited[key] = false;
    vertexTraversed[sourceVertex] = true;
    for (var key in iVL) iVL[key]["extratext"] = "";
    iVL[sourceVertex]["extratext"] = "source";
    cs = createState(iVL, iEL, vertexHighlighted, edgeHighlighted, vertexTraversed, edgeTraversed, edgeQueued);
    cs["status"] = "T = {" + sourceVertex + "}.";
    cs["lineNo"] = 1;
    stateList.push(cs);

    delete vertexHighlighted[sourceVertex];
    vertexTraversed[sourceVertex] = true;

    var sortedArray = [];
    var enqueuedToString = "";

    function sortedArrayToString() {
      var ansStr = "";
      var maxLength = Math.min(sortedArray.length, 6);
      for (var i = 0; i < maxLength; i++) {
        var thisTriple = sortedArray[i];
        ansStr += "(" + thisTriple.getFirst() + "," + thisTriple.getSecond() + ")";
        if (i < (maxLength-1)) ansStr += ", ";
      }
      if (sortedArray.length > 6) ansStr += "..";
      if (ansStr == "") ansStr = "empty";
      return ansStr;
    }

    function process(vtx) {
      enqueuedToString = "";
      visited[vtx] = true;
      for (key in iAL[vtx]) {
        var v = iAL[vtx][key].getFirst();
        var w = iAL[vtx][key].getSecond();
        var enqueuedEdgeId = iAL[vtx][key].getThird();
        if (!visited[v]) {
          enqueuedEdge = new ObjectTriple(parseInt(w), parseInt(v), parseInt(enqueuedEdgeId));
          edgeQueued[enqueuedEdgeId] = true;
          enqueuedToString += "(" + w + "," + v + "), ";
          sortedArray.push(enqueuedEdge);
        }
      }
      enqueuedToString = enqueuedToString.substring(0, enqueuedToString.length-2);
      sortedArray.sort(ObjectTriple.compare);
    }

    process(sourceVertex);

    cs = createState(iVL, iEL, vertexHighlighted, edgeHighlighted, vertexTraversed, edgeTraversed, edgeQueued);
    cs["status"] = enqueuedToString + " is added to the PQ.<br>The PQ is now " + sortedArrayToString() + ".";
    cs["lineNo"] = 2;
    stateList.push(cs);

    var numTaken = 1;
    while (sortedArray.length > 0) {
      var dequeuedEdge = sortedArray.shift();
      var otherVertex = dequeuedEdge.getSecond();
      var edgeId = dequeuedEdge.getThird();

      vertexHighlighted[otherVertex] = true;
      edgeHighlighted[edgeId] = true;
      cs = createState(iVL, iEL, vertexHighlighted, edgeHighlighted, vertexTraversed, edgeTraversed, edgeQueued);
      cs["status"] = "(" + dequeuedEdge.getFirst() + "," + otherVertex + ") bị loại bỏ ra khỏi PQ. Kiểm tra nếu cạnh " + otherVertex + " is in T.<br>The PQ is now " + sortedArrayToString() + ".";
      cs["lineNo"] = 4;
      stateList.push(cs);

      if (!visited[otherVertex]) {
        delete edgeHighlighted[edgeId];
        edgeHighlighted[edgeId] = true;
        vertexHighlighted[otherVertex] = true;

        cs = createState(iVL, iEL, vertexHighlighted, edgeHighlighted, vertexTraversed, edgeTraversed, edgeQueued);
        cs["status"] = otherVertex + " không nằm trong T.";
        cs["lineNo"] = 4;
        stateList.push(cs);

        delete vertexHighlighted[otherVertex];
        delete edgeHighlighted[edgeId];
        edgeTraversed[edgeId] = true;
        vertexTraversed[otherVertex] = true;

        process(otherVertex);

        totalWeight += parseInt(dequeuedEdge.getFirst());
        cs = createState(iVL, iEL, vertexHighlighted, edgeHighlighted, vertexTraversed, edgeTraversed, edgeQueued);
        cs["status"] = otherVertex + " and this edge are added into T (T\\&#39;s weight = " + totalWeight + "), " + (enqueuedToString.length > 0 ? enqueuedToString : "(null)") + " is also added to PQ. The PQ is now " + sortedArrayToString() + ".";
        cs["lineNo"] = 5;
        stateList.push(cs);

        numTaken++;
        if (numTaken == amountVertex) { // to show that we can optimize Prim's a bit.
          cs = createState(iVL, iEL, vertexHighlighted, edgeHighlighted, vertexTraversed, edgeTraversed, edgeQueued);
          cs["status"] = numTaken + " vertices have been taken by Prim\\&#39;s, so the MST has been found.<br>An optimized version of Prim\\&#39;s algorithm can stop here."; // For now, we will continue until the PQ is empty
          cs["lineNo"] = 5;
          stateList.push(cs);
        }
      }
      else {
        delete edgeQueued[edgeId];
        delete edgeHighlighted[edgeId];

        cs = createState(iVL, iEL, vertexHighlighted, edgeHighlighted, vertexTraversed, edgeTraversed, edgeQueued);
        cs["status"] = otherVertex + " có trong T, bỏ qua cạnh này.";
        cs["lineNo"] = 6;
        stateList.push(cs);
      }
    }

    cs = createState(iVL, iEL, vertexHighlighted, edgeHighlighted, vertexTraversed, edgeTraversed, edgeQueued);
    cs["status"] = "The highlighted vertices and edges form an MST with weight = " + totalWeight + '.<br><b><a href="https://cpbook.net/#downloads" target="_blank">ch4_03_kruskal_prim.cpp/java, ch4.zip, CP3.</a></b>';
    cs["lineNo"] = 7;
    stateList.push(cs);

    populatePseudocode(0);
    gw.startAnimation(stateList, callback);
    return true;
  }

  this.examples = function(id) {
    var vertexList = getExampleGraph(id, VL);
    var edgeList = getExampleGraph(id, EL);
    this.loadGraph(vertexList, edgeList);
    return true;
  }

  this.loadGraph = function(vertexList, edgeList) {
    iVL = vertexList;
    iEL = edgeList;
    fixJSON();
    var newState = createState(iVL, iEL);
    gw.updateGraph(newState, 500);
  }

  function createState(iVLObject, iELObject, vertexHighlighted, edgeHighlighted, vertexTraversed, edgeTraversed, edgeQueued) {
    var isDefaultGrey = true;
    if ((vertexHighlighted == null) && (edgeHighlighted == null) && (vertexTraversed == null) && (edgeTraversed == null) && (edgeQueued == null))
      isDefaultGrey = false;
    if (vertexHighlighted == null) vertexHighlighted = {};
    if (edgeHighlighted == null) edgeHighlighted = {};
    if (vertexTraversed == null) vertexTraversed = {};
    if (edgeTraversed == null) edgeTraversed = {};
    if (edgeQueued == null) edgeQueued = {};

    var key;
    var state = {
      "vl": {},
      "el": {}
    };

    if (isDefaultGrey) {
      for (key in iVLObject) {
        state["vl"][key] = {};
        state["vl"][key]["cx"] = iVLObject[key]["x"];
        state["vl"][key]["cy"] = iVLObject[key]["y"];
        state["vl"][key]["text"] = key;
        state["vl"][key]["state"] = VERTEX_GREY_OUTLINE;
        state["vl"][key]["extratext"] = iVLObject[key]["extratext"];
      }
      for (key in iELObject) {
        state["el"][key] = {};
        state["el"][key]["vertexA"] = iELObject[key]["u"];
        state["el"][key]["vertexB"] = iELObject[key]["v"];
        state["el"][key]["type"] = EDGE_TYPE_UDE;
        state["el"][key]["weight"] = iELObject[key]["w"];
        state["el"][key]["state"] = EDGE_GREY;
        state["el"][key]["displayWeight"] = true;
        state["el"][key]["animateHighlighted"] = false;
      }
    }
    else {
      for (key in iVLObject) {
        state["vl"][key] = {};
        state["vl"][key]["cx"] = iVLObject[key]["x"];
        state["vl"][key]["cy"] = iVLObject[key]["y"];
        state["vl"][key]["text"] = key;
        state["vl"][key]["state"] = VERTEX_DEFAULT;
        state["vl"][key]["extratext"] = iVLObject[key]["extratext"];
      }
      for (key in iELObject) {
        state["el"][key] = {};
        state["el"][key]["vertexA"] = iELObject[key]["u"];
        state["el"][key]["vertexB"] = iELObject[key]["v"];
        state["el"][key]["type"] = EDGE_TYPE_UDE;
        state["el"][key]["weight"] = iELObject[key]["w"];
        state["el"][key]["state"] = EDGE_DEFAULT;
        state["el"][key]["displayWeight"] = true;
        state["el"][key]["animateHighlighted"] = false;
      }
    }

    for (key in edgeQueued) {
      key1 = state["el"][key]["vertexA"];
      key2 = state["el"][key]["vertexB"]
      state["vl"][key1]["state"] = VERTEX_DEFAULT;
      state["vl"][key2]["state"] = VERTEX_DEFAULT;
      state["el"][key]["state"] = EDGE_DEFAULT;
    }

    for (key in vertexHighlighted) state["vl"][key]["state"] = VERTEX_HIGHLIGHTED; // VERTEX_BLUE_FILL;
    for (key in edgeHighlighted) state["el"][key]["state"] = EDGE_HIGHLIGHTED; // EDGE_BLUE;
    for (key in vertexTraversed) state["vl"][key]["state"] = VERTEX_TRAVERSED; // VERTEX_GREEN_FILL;
    for (key in edgeTraversed) state["el"][key]["state"] = EDGE_TRAVERSED; // EDGE_GREEN;

    return state;
  }

  function populatePseudocode(act) {
    switch (act) {
      case 0: // Prim's
        $('#code1').html('T = {s}');
        $('#code2').html("enqueue edges connected to s in PQ (by inc weight)");
        $('#code3').html('while (!PQ.isEmpty)');
        $('#code4').html('&nbsp;&nbsp;if (vertex v linked with e = PQ.remove &notin; T)');
        $('#code5').html("&nbsp;&nbsp;&nbsp;&nbsp;T = T &cup; {v, e}, enqueue edges connected to v");
        $('#code6').html("&nbsp;&nbsp;else ignore e");
        $('#code7').html('MST = T // <b><a href="https://cpbook.net/#downloads" target="_blank">ch4_03_kruskal_prim.cpp/java, ch4, CP3</a></b>');
        break;
      case 1: // Kruskal's
        $('#code1').html("Sắp xếp E cạnh tăng dần theo trọng số");
        $('#code2').html('T = {}');
        $('#code3').html('for (i = 0; i &lt; edgeList.length; i++)');
        $('#code4').html("&nbsp;&nbsp;nếu thêm e = edgelist[i] không tạo thành một chu trình");
        $('#code5').html("&nbsp;&nbsp;&nbsp;&nbsp;thêm e vào T");
        $('#code6').html("&nbsp;&nbsp;else ignore e");
        $('#code7').html('MST = T // <b><a href="https://cpbook.net/#downloads" target="_blank">ch4_03_kruskal_prim.cpp/java, ch4, CP3</a></b>');
        break;
    }
  }
}



// MST Actions
var actionsWidth = 150;
var statusCodetraceWidth = 430;

var isExamplesOpen = false, isPrimsOpen = false;

function openExamples() {
  if (!isExamplesOpen) {
    $('.examples').fadeIn('fast');
    isExamplesOpen = true;
  }
}

function closeExamples() {
  if (isExamplesOpen) {
    $('.examples').fadeOut('fast');
    isExamplesOpen = false;
  }
}

function openPrims() {
  if (!isPrimsOpen) {
    $('.prims').fadeIn('fast');
    isPrimsOpen = true;
  }
}

function closePrims() {
  if (isPrimsOpen) {
    $('.prims').fadeOut('fast');
    $('#prims-err').html("");
    isPrimsOpen = false;
  }
}

function hideEntireActionsPanel() {
  closeExamples();
  closePrims();
  hideActionsPanel();
}



// local
write(true, false);
var mw, gw, randomGraphID;

$(function() {
  $('#play').hide();
  mw = new MST();
  gw = mw.getGraphWidget();
  var options = [CP3_4_10, CP3_4_14, K5, RAIL, TESSELLATION];
  mw.examples(options[Math.floor(Math.random()*5)]);
  randomGraphID = -1;

  var graphJSON = getQueryVariable("create");
  if (graphJSON.length > 0) {
    importjson(graphJSON);
    window.history.pushState("object or string", "Title", window.location.href.split('?')[0]);
  }

  $('#draw').click(function() {
    closeExamples();
    closePrims();
  });

  $('#random').click(function() {
    closeExamples();
    closePrims();
  });

  $('#examples').click(function() {
    openExamples();
    closePrims();
  })

  $('#kruskals').click(function() {
    closeExamples();
    closePrims();
  });

  $('#prims').click(function() {
    closeExamples();
    openPrims();
  });
});

function importjson(text) {
  if (isPlaying) stop();
  if (mode == "exploration") {
    mw.importjson(text);
    closeExamples();
    isPlaying = false;
  }
}

function drawGraph() {
  if (isPlaying) stop();
  if (mode == "exploration") {
    $('#dark-overlay').fadeIn(function() {
      $('#drawgraph').fadeIn();
    });
    mw.startLoop();
    isPlaying = false;
  }
}

function drawDone() {
  if (!mw.draw()) return false;
  mw.stopLoop();
  $('#drawgraph').fadeOut();
  $('#dark-overlay').fadeOut();
}

function drawCancel() {
  mw.stopLoop();
  $('#drawgraph').fadeOut();
  $('#dark-overlay').fadeOut();
}

// function createRandom() {
//   if (isPlaying) stop();
//   if (mode == "exploration") {
//     $.ajax({
//       url: PHP_DOMAIN + "/php/Graph.php?mode=" + MODE_GET_RANDOM_SUBMITTED_GRAPH + "&directed=" + 0 + "&connected=" + 1 // + "&topic=MST"
//     }).done(function(data) {
//       data = jQuery.parseJSON(data); // JSON.parse(data);
//       var graph = extractQnGraph(data.graph);
//       if (data.graphID == randomGraphID) // make sure it is different, make sure #graph > 1
//         createRandom();
//       randomGraphID = data.graphID;
//       mw.initRandom(graph);
//       $('#rate-sample-graph').show();
//     })
//     $('#progress-bar').slider("option", "max", 0);
//     closeExamples();
//     isPlaying = false;
//   }
// }

function example(id) {
  if (isPlaying) stop();
  setTimeout(function() {
    if ((mode == "exploration") && mw.examples(id)) {
      $('#progress-bar').slider("option", "max", 0);
      closeExamples();
      isPlaying = false;
    }
  }, 500);
}

function kruskals(callback) {
  if (isPlaying) stop();
  commonAction(mw.kruskal(callback), "Thuật toán Kruskal");
}

function prims() {
  if (isPlaying) stop();
  var input = parseInt($('#prim-v').val());
  primsWithInput(input);
}

function primsWithInput(input, callback) {
  commonAction(mw.prim(input, callback), "Thuật toán Prim, s = " + input);
  setTimeout(function() { $('#prim-v').val(Math.floor(Math.random()*mw.getV())); }, 500); // randomized for next click between [0..V-1]
}

function loadGraph(graph) {
  if (mw) {
    mw.loadGraph(graph['vl'], graph['el']);
  }
}

// Implement these functions in each visualisation
var userGraph = {
  'vl': {},
  'el': {},
};

// This function will be called before entering E-Lecture Mode
function ENTER_LECTURE_MODE() {
  if (mw) userGraph = mw.getGraph();
}

// This function will be called before returning to Explore Mode
function ENTER_EXPLORE_MODE() {
  loadGraph(userGraph);
}

// Lecture action functions
function CUSTOM_ACTION(action, data, mode) {
  if (action == 'kruskal') {
    hideSlide(function() {
      kruskals(showSlide);
    });
  }
  else if (action == 'prim') {
    hideSlide(function() {
      primsWithInput(data, showSlide);
    });
  }
}
</script>
</body>

<!-- Mirrored from visualgo.net/vi/mst by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 26 Nov 2020 06:40:17 GMT -->
</html>
